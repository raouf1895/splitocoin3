const lu=Symbol(),ms=Object.getPrototypeOf,an=new WeakMap,hu=t=>t&&(an.has(t)?an.get(t):ms(t)===Object.prototype||ms(t)===Array.prototype),fu=t=>hu(t)&&t[lu]||null,vs=(t,e=!0)=>{an.set(t,e)},zi=t=>typeof t=="object"&&t!==null,Wt=new WeakMap,pi=new WeakSet,du=(t=Object.is,e=(f,w)=>new Proxy(f,w),r=f=>zi(f)&&!pi.has(f)&&(Array.isArray(f)||!(Symbol.iterator in f))&&!(f instanceof WeakMap)&&!(f instanceof WeakSet)&&!(f instanceof Error)&&!(f instanceof Number)&&!(f instanceof Date)&&!(f instanceof String)&&!(f instanceof RegExp)&&!(f instanceof ArrayBuffer),i=f=>f.configurable&&f.enumerable&&f.writable,n=f=>{switch(f.status){case"fulfilled":return f.value;case"rejected":throw f.reason;default:throw f}},s=new WeakMap,a=(f,w,y=n)=>{const v=s.get(f);if(v?.[0]===w)return v[1];const S=Array.isArray(f)?[]:Object.create(Object.getPrototypeOf(f));return vs(S,!0),s.set(f,[w,S]),Reflect.ownKeys(f).forEach(C=>{if(Object.getOwnPropertyDescriptor(S,C))return;const N=Reflect.get(f,C),K={value:N,enumerable:!0,configurable:!0};if(pi.has(N))vs(N,!1);else if(N instanceof Promise)delete K.value,K.get=()=>y(N);else if(Wt.has(N)){const[D,I]=Wt.get(N);K.value=a(D,I(),y)}Object.defineProperty(S,C,K)}),Object.preventExtensions(S)},c=new WeakMap,h=[1,1],l=f=>{if(!zi(f))throw new Error("object required");const w=c.get(f);if(w)return w;let y=h[0];const v=new Set,S=(L,U=++h[0])=>{y!==U&&(y=U,v.forEach(z=>z(L,U)))};let C=h[1];const N=(L=++h[1])=>(C!==L&&!v.size&&(C=L,D.forEach(([U])=>{const z=U[1](L);z>y&&(y=z)})),y),K=L=>(U,z)=>{const b=[...U];b[1]=[L,...b[1]],S(b,z)},D=new Map,I=(L,U)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&D.has(L))throw new Error("prop listener already exists");if(v.size){const z=U[3](K(L));D.set(L,[U,z])}else D.set(L,[U])},_=L=>{var U;const z=D.get(L);z&&(D.delete(L),(U=z[1])==null||U.call(z))},E=L=>(v.add(L),v.size===1&&D.forEach(([z,b],A)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&b)throw new Error("remove already exists");const k=z[3](K(A));D.set(A,[z,k])}),()=>{v.delete(L),v.size===0&&D.forEach(([z,b],A)=>{b&&(b(),D.set(A,[z]))})}),p=Array.isArray(f)?[]:Object.create(Object.getPrototypeOf(f)),o=(L,U,z,b,A)=>{if(L&&(t(U,b)||c.has(b)&&t(U,c.get(b))))return;_(z),zi(b)&&(b=fu(b)||b);let k=b;if(b instanceof Promise)b.then(B=>{b.status="fulfilled",b.value=B,S(["resolve",[z],B])}).catch(B=>{b.status="rejected",b.reason=B,S(["reject",[z],B])});else{!Wt.has(b)&&r(b)&&(k=l(b));const B=!pi.has(k)&&Wt.get(k);B&&I(z,B)}A(k),S(["set",[z],b,U])},R=e(p,{deleteProperty(L,U){const z=Reflect.get(L,U);_(U);const b=Reflect.deleteProperty(L,U);return b&&S(["delete",[U],z]),b},set(L,U,z,b){const A=Reflect.has(L,U),k=Reflect.get(L,U,b);return o(A,k,U,z,B=>{Reflect.set(L,U,B,b)}),!0},defineProperty(L,U,z){if(i(z)){const b=Reflect.getOwnPropertyDescriptor(L,U);if(!b||i(b))return o(!!b&&"value"in b,b?.value,U,z.value,A=>{Reflect.defineProperty(L,U,{...z,value:A})}),!0}return Reflect.defineProperty(L,U,z)}});c.set(f,R);const $=[p,N,a,E];return Wt.set(R,$),Reflect.ownKeys(f).forEach(L=>{const U=Object.getOwnPropertyDescriptor(f,L);"value"in U&&(R[L]=f[L],delete U.value,delete U.writable),Object.defineProperty(p,L,U)}),R})=>[l,Wt,pi,t,e,r,i,n,s,a,c,h],[pu]=du();function Xt(t={}){return pu(t)}function dr(t,e,r){const i=Wt.get(t);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!i&&console.warn("Please use proxy object");let n;const s=[],a=i[3];let c=!1;const l=a(f=>{if(s.push(f),r){e(s.splice(0));return}n||(n=Promise.resolve().then(()=>{n=void 0,c&&e(s.splice(0))}))});return c=!0,()=>{c=!1,l()}}function gu(t,e){const r=Wt.get(t);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[i,n,s]=r;return s(i,n(),e)}const Qe=Xt({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),ta={state:Qe,subscribe(t){return dr(Qe,()=>t(Qe))},push(t,e){t!==Qe.view&&(Qe.view=t,e&&(Qe.data=e),Qe.history.push(t))},reset(t){Qe.view=t,Qe.history=[t]},replace(t){Qe.history.length>1&&(Qe.history[Qe.history.length-1]=t,Qe.view=t)},goBack(){if(Qe.history.length>1){Qe.history.pop();const[t]=Qe.history.slice(-1);Qe.view=t}},setData(t){Qe.data=t}},lt={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?Boolean(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return lt.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return lt.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(lt.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let i=t;i.includes("://")||(i=t.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},formatUniversalUrl(t,e,r){if(!lt.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let i=t;i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){try{localStorage.setItem(lt.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(t){try{const[e]=t.split("?");localStorage.setItem(lt.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(lt.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(lt.WCM_VERSION,"2.6.1")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var t;const e=(t=ta.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},yu=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),ot=Xt({enabled:yu,userSessionId:"",events:[],connectedWalletId:void 0}),_u={state:ot,subscribe(t){return dr(ot.events,()=>t(gu(ot.events[ot.events.length-1])))},initialize(){ot.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(ot.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){ot.connectedWalletId=t},click(t){if(ot.enabled){const e={type:"CLICK",name:t.name,userSessionId:ot.userSessionId,timestamp:Date.now(),data:t};ot.events.push(e)}},track(t){if(ot.enabled){const e={type:"TRACK",name:t.name,userSessionId:ot.userSessionId,timestamp:Date.now(),data:t};ot.events.push(e)}},view(t){if(ot.enabled){const e={type:"VIEW",name:t.name,userSessionId:ot.userSessionId,timestamp:Date.now(),data:t};ot.events.push(e)}}},Nt=Xt({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Pt={state:Nt,subscribe(t){return dr(Nt,()=>t(Nt))},setChains(t){Nt.chains=t},setWalletConnectUri(t){Nt.walletConnectUri=t},setIsCustomDesktop(t){Nt.isCustomDesktop=t},setIsCustomMobile(t){Nt.isCustomMobile=t},setIsDataLoaded(t){Nt.isDataLoaded=t},setIsUiLoaded(t){Nt.isUiLoaded=t},setIsAuth(t){Nt.isAuth=t}},gi=Xt({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Sr={state:gi,subscribe(t){return dr(gi,()=>t(gi))},setConfig(t){var e,r;_u.initialize(),Pt.setChains(t.chains),Pt.setIsAuth(Boolean(t.enableAuthMode)),Pt.setIsCustomMobile(Boolean((e=t.mobileWallets)==null?void 0:e.length)),Pt.setIsCustomDesktop(Boolean((r=t.desktopWallets)==null?void 0:r.length)),lt.setModalVersionInStorage(),Object.assign(gi,t)}};var bu=Object.defineProperty,Es=Object.getOwnPropertySymbols,wu=Object.prototype.hasOwnProperty,mu=Object.prototype.propertyIsEnumerable,Ds=(t,e,r)=>e in t?bu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vu=(t,e)=>{for(var r in e||(e={}))wu.call(e,r)&&Ds(t,r,e[r]);if(Es)for(var r of Es(e))mu.call(e,r)&&Ds(t,r,e[r]);return t};const cn="https://explorer-api.walletconnect.com",un="wcm",ln="js-2.6.1";async function yi(t,e){const r=vu({sdkType:un,sdkVersion:ln},e),i=new URL(t,cn);return i.searchParams.append("projectId",Sr.state.projectId),Object.entries(r).forEach(([n,s])=>{s&&i.searchParams.append(n,String(s))}),(await fetch(i)).json()}const nr={async getDesktopListings(t){return yi("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return yi("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return yi("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return yi("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${cn}/w3m/v1/getWalletImage/${t}?projectId=${Sr.state.projectId}&sdkType=${un}&sdkVersion=${ln}`},getAssetImageUrl(t){return`${cn}/w3m/v1/getAssetImage/${t}?projectId=${Sr.state.projectId}&sdkType=${un}&sdkVersion=${ln}`}};var Eu=Object.defineProperty,Ss=Object.getOwnPropertySymbols,Du=Object.prototype.hasOwnProperty,Su=Object.prototype.propertyIsEnumerable,Os=(t,e,r)=>e in t?Eu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ou=(t,e)=>{for(var r in e||(e={}))Du.call(e,r)&&Os(t,r,e[r]);if(Ss)for(var r of Ss(e))Su.call(e,r)&&Os(t,r,e[r]);return t};const xs=lt.isMobile(),Rt=Xt({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),A1={state:Rt,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=Sr.state;if(t==="NONE"||e==="ALL"&&!t)return Rt.recomendedWallets;if(lt.isArray(t)){const r={recommendedIds:t.join(",")},{listings:i}=await nr.getAllListings(r),n=Object.values(i);n.sort((s,a)=>{const c=t.indexOf(s.id),h=t.indexOf(a.id);return c-h}),Rt.recomendedWallets=n}else{const{chains:r,isAuth:i}=Pt.state,n=r?.join(","),s=lt.isArray(e),a={page:1,sdks:i?"auth_v1":void 0,entries:lt.RECOMMENDED_WALLET_AMOUNT,chains:n,version:2,excludedIds:s?e.join(","):void 0},{listings:c}=xs?await nr.getMobileListings(a):await nr.getDesktopListings(a);Rt.recomendedWallets=Object.values(c)}return Rt.recomendedWallets},async getWallets(t){const e=Ou({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:i}=Sr.state,{recomendedWallets:n}=Rt;if(i==="ALL")return Rt.wallets;n.length?e.excludedIds=n.map(w=>w.id).join(","):lt.isArray(r)&&(e.excludedIds=r.join(",")),lt.isArray(i)&&(e.excludedIds=[e.excludedIds,i].filter(Boolean).join(",")),Pt.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:a}=t,{listings:c,total:h}=xs?await nr.getMobileListings(e):await nr.getDesktopListings(e),l=Object.values(c),f=a?"search":"wallets";return Rt[f]={listings:[...Rt[f].listings,...l],total:h,page:s??1},{listings:l,total:h}},getWalletImageUrl(t){return nr.getWalletImageUrl(t)},getAssetImageUrl(t){return nr.getAssetImageUrl(t)},resetSearch(){Rt.search={listings:[],total:0,page:1}}},br=Xt({open:!1}),Ki={state:br,subscribe(t){return dr(br,()=>t(br))},async open(t){return new Promise(e=>{const{isUiLoaded:r,isDataLoaded:i}=Pt.state;if(lt.removeWalletConnectDeepLink(),Pt.setWalletConnectUri(t?.uri),Pt.setChains(t?.chains),ta.reset("ConnectWallet"),r&&i)br.open=!0,e();else{const n=setInterval(()=>{const s=Pt.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(n),br.open=!0,e())},200)}})},close(){br.open=!1}};var xu=Object.defineProperty,Is=Object.getOwnPropertySymbols,Iu=Object.prototype.hasOwnProperty,Au=Object.prototype.propertyIsEnumerable,As=(t,e,r)=>e in t?xu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tu=(t,e)=>{for(var r in e||(e={}))Iu.call(e,r)&&As(t,r,e[r]);if(Is)for(var r of Is(e))Au.call(e,r)&&As(t,r,e[r]);return t};function Pu(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Nr=Xt({themeMode:Pu()?"dark":"light"}),Ts={state:Nr,subscribe(t){return dr(Nr,()=>t(Nr))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Nr.themeMode=e),r&&(Nr.themeVariables=Tu({},r))}},sr=Xt({open:!1,message:"",variant:"success"}),T1={state:sr,subscribe(t){return dr(sr,()=>t(sr))},openToast(t,e){sr.open=!0,sr.message=t,sr.variant=e},closeToast(){sr.open=!1}};let Cu=class{constructor(e){this.openModal=Ki.open,this.closeModal=Ki.close,this.subscribeModal=Ki.subscribe,this.setTheme=Ts.setThemeConfig,Ts.setThemeConfig(e),Sr.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await import("./index-23719d58.js");const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Pt.setIsUiLoaded(!0)}}};var Nu;function Yt(){}Yt.prototype=Object.create(null);function ae(){ae.init.call(this)}ae.EventEmitter=ae;ae.usingDomains=!1;ae.prototype.domain=void 0;ae.prototype._events=void 0;ae.prototype._maxListeners=void 0;ae.defaultMaxListeners=10;ae.init=function(){this.domain=null,ae.usingDomains&&Nu.active,(!this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=new Yt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ae.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this};function ra(t){return t._maxListeners===void 0?ae.defaultMaxListeners:t._maxListeners}ae.prototype.getMaxListeners=function(){return ra(this)};function Ru(t,e,r){if(e)t.call(r);else for(var i=t.length,n=ei(t,i),s=0;s<i;++s)n[s].call(r)}function $u(t,e,r,i){if(e)t.call(r,i);else for(var n=t.length,s=ei(t,n),a=0;a<n;++a)s[a].call(r,i)}function Lu(t,e,r,i,n){if(e)t.call(r,i,n);else for(var s=t.length,a=ei(t,s),c=0;c<s;++c)a[c].call(r,i,n)}function Uu(t,e,r,i,n,s){if(e)t.call(r,i,n,s);else for(var a=t.length,c=ei(t,a),h=0;h<a;++h)c[h].call(r,i,n,s)}function Fu(t,e,r,i){if(e)t.apply(r,i);else for(var n=t.length,s=ei(t,n),a=0;a<n;++a)s[a].apply(r,i)}ae.prototype.emit=function(e){var r,i,n,s,a,c,h,l=e==="error";if(c=this._events,c)l=l&&c.error==null;else if(!l)return!1;if(h=this.domain,l){if(r=arguments[1],h)r||(r=new Error('Uncaught, unspecified "error" event')),r.domainEmitter=this,r.domain=h,r.domainThrown=!1,h.emit("error",r);else{if(r instanceof Error)throw r;var f=new Error('Uncaught, unspecified "error" event. ('+r+")");throw f.context=r,f}return!1}if(i=c[e],!i)return!1;var w=typeof i=="function";switch(n=arguments.length,n){case 1:Ru(i,w,this);break;case 2:$u(i,w,this,arguments[1]);break;case 3:Lu(i,w,this,arguments[1],arguments[2]);break;case 4:Uu(i,w,this,arguments[1],arguments[2],arguments[3]);break;default:for(s=new Array(n-1),a=1;a<n;a++)s[a-1]=arguments[a];Fu(i,w,this,s)}return!0};function ia(t,e,r,i){var n,s,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(s=t._events,s?(s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]):(s=t._events=new Yt,t._eventsCount=0),!a)a=s[e]=r,++t._eventsCount;else if(typeof a=="function"?a=s[e]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),!a.warned&&(n=ra(t),n&&n>0&&a.length>n)){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,Mu(c)}return t}function Mu(t){typeof console.warn=="function"?console.warn(t):console.log(t)}ae.prototype.addListener=function(e,r){return ia(this,e,r,!1)};ae.prototype.on=ae.prototype.addListener;ae.prototype.prependListener=function(e,r){return ia(this,e,r,!0)};function na(t,e,r){var i=!1;function n(){t.removeListener(e,n),i||(i=!0,r.apply(t,arguments))}return n.listener=r,n}ae.prototype.once=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,na(this,e,r)),this};ae.prototype.prependOnceListener=function(e,r){if(typeof r!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,na(this,e,r)),this};ae.prototype.removeListener=function(e,r){var i,n,s,a,c;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if(n=this._events,!n)return this;if(i=n[e],!i)return this;if(i===r||i.listener&&i.listener===r)--this._eventsCount===0?this._events=new Yt:(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(s=-1,a=i.length;a-- >0;)if(i[a]===r||i[a].listener&&i[a].listener===r){c=i[a].listener,s=a;break}if(s<0)return this;if(i.length===1){if(i[0]=void 0,--this._eventsCount===0)return this._events=new Yt,this;delete n[e]}else ju(i,s);n.removeListener&&this.emit("removeListener",e,c||r)}return this};ae.prototype.off=function(t,e){return this.removeListener(t,e)};ae.prototype.removeAllListeners=function(e){var r,i;if(i=this._events,!i)return this;if(!i.removeListener)return arguments.length===0?(this._events=new Yt,this._eventsCount=0):i[e]&&(--this._eventsCount===0?this._events=new Yt:delete i[e]),this;if(arguments.length===0){for(var n=Object.keys(i),s=0,a;s<n.length;++s)a=n[s],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=new Yt,this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r)do this.removeListener(e,r[r.length-1]);while(r[0]);return this};ae.prototype.listeners=function(e){var r,i,n=this._events;return n?(r=n[e],r?typeof r=="function"?i=[r.listener||r]:i=Bu(r):i=[]):i=[],i};ae.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):sa.call(t,e)};ae.prototype.listenerCount=sa;function sa(t){var e=this._events;if(e){var r=e[t];if(typeof r=="function")return 1;if(r)return r.length}return 0}ae.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function ju(t,e){for(var r=e,i=r+1,n=t.length;i<n;r+=1,i+=1)t[r]=t[i];t.pop()}function ei(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}function Bu(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}var qu=Object.freeze({__proto__:null,EventEmitter:ae,default:ae}),mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Qt(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}),r}var Ai={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hn=function(t,e){return hn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},hn(t,e)};function Ku(t,e){hn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var fn=function(){return fn=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fn.apply(this,arguments)};function Vu(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Hu(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Wu(t,e){return function(r,i){e(r,i,t)}}function ku(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Gu(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(f){try{l(i.next(f))}catch(w){a(w)}}function h(f){try{l(i.throw(f))}catch(w){a(w)}}function l(f){f.done?s(f.value):n(f.value).then(c,h)}l((i=i.apply(t,e||[])).next())})}function Yu(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return h([l,f])}}function h(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ju(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Xu(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function dn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oa(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Qu(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(oa(arguments[e]));return t}function Zu(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}function Gr(t){return this instanceof Gr?(this.v=t,this):new Gr(t)}function el(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(y){i[y]&&(n[y]=function(v){return new Promise(function(S,C){s.push([y,v,S,C])>1||c(y,v)})})}function c(y,v){try{h(i[y](v))}catch(S){w(s[0][3],S)}}function h(y){y.value instanceof Gr?Promise.resolve(y.value.v).then(l,f):w(s[0][2],y)}function l(y){c("next",y)}function f(y){c("throw",y)}function w(y,v){y(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function tl(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(a){return(r=!r)?{value:Gr(t[n](a)),done:n==="return"}:s?s(a):a}:s}}function rl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof dn=="function"?dn(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(a){return new Promise(function(c,h){a=t[s](a),n(c,h,a.done,a.value)})}}function n(s,a,c,h){Promise.resolve(h).then(function(l){s({value:l,done:c})},a)}}function il(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function nl(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function sl(t){return t&&t.__esModule?t:{default:t}}function ol(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function al(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var cl=Object.freeze({__proto__:null,get __assign(){return fn},__asyncDelegator:tl,__asyncGenerator:el,__asyncValues:rl,__await:Gr,__awaiter:Gu,__classPrivateFieldGet:ol,__classPrivateFieldSet:al,__createBinding:Ju,__decorate:Hu,__exportStar:Xu,__extends:Ku,__generator:Yu,__importDefault:sl,__importStar:nl,__makeTemplateObject:il,__metadata:ku,__param:Wu,__read:oa,__rest:Vu,__spread:Qu,__spreadArrays:Zu,__values:dn}),aa=Qt(cl),ti={};Object.defineProperty(ti,"__esModule",{value:!0});function ul(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}ti.safeJsonParse=ul;function ll(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}ti.safeJsonStringify=ll;var Rr={exports:{}},Ps;function hl(){return Ps||(Ps=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof mt<"u"&&mt.localStorage?Rr.exports=mt.localStorage:typeof window<"u"&&window.localStorage?Rr.exports=window.localStorage:Rr.exports=new e}()),Rr.exports}var Vi={},$r={},Cs;function fl(){if(Cs)return $r;Cs=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.IKeyValueStorage=void 0;class t{}return $r.IKeyValueStorage=t,$r}var Lr={},Ns;function dl(){if(Ns)return Lr;Ns=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.parseEntry=void 0;const t=ti;function e(r){var i;return[r[0],t.safeJsonParse((i=r[1])!==null&&i!==void 0?i:"")]}return Lr.parseEntry=e,Lr}var Rs;function pl(){return Rs||(Rs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=aa;e.__exportStar(fl(),t),e.__exportStar(dl(),t)}(Vi)),Vi}Object.defineProperty(Ai,"__esModule",{value:!0});Ai.KeyValueStorage=void 0;const mr=aa,$s=ti,gl=mr.__importDefault(hl()),yl=pl();class ca{constructor(){this.localStorage=gl.default}getKeys(){return mr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return mr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(yl.parseEntry)})}getItem(e){return mr.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return $s.safeJsonParse(r)})}setItem(e,r){return mr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,$s.safeJsonStringify(r))})}removeItem(e){return mr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Ai.KeyValueStorage=ca;var _l=Ai.default=ca,Or={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pn=function(t,e){return pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},pn(t,e)};function bl(t,e){pn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var gn=function(){return gn=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},gn.apply(this,arguments)};function wl(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function ml(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function vl(t,e){return function(r,i){e(r,i,t)}}function El(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Dl(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(f){try{l(i.next(f))}catch(w){a(w)}}function h(f){try{l(i.throw(f))}catch(w){a(w)}}function l(f){f.done?s(f.value):n(f.value).then(c,h)}l((i=i.apply(t,e||[])).next())})}function Sl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return h([l,f])}}function h(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ol(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function xl(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function yn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ua(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Il(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ua(arguments[e]));return t}function Al(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}function Yr(t){return this instanceof Yr?(this.v=t,this):new Yr(t)}function Tl(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(y){i[y]&&(n[y]=function(v){return new Promise(function(S,C){s.push([y,v,S,C])>1||c(y,v)})})}function c(y,v){try{h(i[y](v))}catch(S){w(s[0][3],S)}}function h(y){y.value instanceof Yr?Promise.resolve(y.value.v).then(l,f):w(s[0][2],y)}function l(y){c("next",y)}function f(y){c("throw",y)}function w(y,v){y(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Pl(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(a){return(r=!r)?{value:Yr(t[n](a)),done:n==="return"}:s?s(a):a}:s}}function Cl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof yn=="function"?yn(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(a){return new Promise(function(c,h){a=t[s](a),n(c,h,a.done,a.value)})}}function n(s,a,c,h){Promise.resolve(h).then(function(l){s({value:l,done:c})},a)}}function Nl(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Rl(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function $l(t){return t&&t.__esModule?t:{default:t}}function Ll(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ul(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Fl=Object.freeze({__proto__:null,get __assign(){return gn},__asyncDelegator:Pl,__asyncGenerator:Tl,__asyncValues:Cl,__await:Yr,__awaiter:Dl,__classPrivateFieldGet:Ll,__classPrivateFieldSet:Ul,__createBinding:Ol,__decorate:ml,__exportStar:xl,__extends:bl,__generator:Sl,__importDefault:$l,__importStar:Rl,__makeTemplateObject:Nl,__metadata:El,__param:vl,__read:ua,__rest:wl,__spread:Il,__spreadArrays:Al,__values:yn}),Ti=Qt(Fl),Ur={},Ml=Qt(qu),Q={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _n=function(t,e){return _n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},_n(t,e)};function jl(t,e){_n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var bn=function(){return bn=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bn.apply(this,arguments)};function Bl(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function ql(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function zl(t,e){return function(r,i){e(r,i,t)}}function Kl(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Vl(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(f){try{l(i.next(f))}catch(w){a(w)}}function h(f){try{l(i.throw(f))}catch(w){a(w)}}function l(f){f.done?s(f.value):n(f.value).then(c,h)}l((i=i.apply(t,e||[])).next())})}function Hl(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return h([l,f])}}function h(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Wl(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function kl(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function wn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function la(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Gl(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(la(arguments[e]));return t}function Yl(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}function Jr(t){return this instanceof Jr?(this.v=t,this):new Jr(t)}function Jl(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(y){i[y]&&(n[y]=function(v){return new Promise(function(S,C){s.push([y,v,S,C])>1||c(y,v)})})}function c(y,v){try{h(i[y](v))}catch(S){w(s[0][3],S)}}function h(y){y.value instanceof Jr?Promise.resolve(y.value.v).then(l,f):w(s[0][2],y)}function l(y){c("next",y)}function f(y){c("throw",y)}function w(y,v){y(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Xl(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(a){return(r=!r)?{value:Jr(t[n](a)),done:n==="return"}:s?s(a):a}:s}}function Ql(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof wn=="function"?wn(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(a){return new Promise(function(c,h){a=t[s](a),n(c,h,a.done,a.value)})}}function n(s,a,c,h){Promise.resolve(h).then(function(l){s({value:l,done:c})},a)}}function Zl(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function eh(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function th(t){return t&&t.__esModule?t:{default:t}}function rh(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function ih(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var nh=Object.freeze({__proto__:null,get __assign(){return bn},__asyncDelegator:Xl,__asyncGenerator:Jl,__asyncValues:Ql,__await:Jr,__awaiter:Vl,__classPrivateFieldGet:rh,__classPrivateFieldSet:ih,__createBinding:Wl,__decorate:ql,__exportStar:kl,__extends:jl,__generator:Hl,__importDefault:th,__importStar:eh,__makeTemplateObject:Zl,__metadata:Kl,__param:zl,__read:la,__rest:Bl,__spread:Gl,__spreadArrays:Yl,__values:wn}),Pi=Qt(nh),Hi={},Fr={},Ls;function sh(){if(Ls)return Fr;Ls=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Fr.delay=t,Fr}var or={},Wi={},ar={},Us;function oh(){return Us||(Us=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.ONE_THOUSAND=ar.ONE_HUNDRED=void 0,ar.ONE_HUNDRED=100,ar.ONE_THOUSAND=1e3),ar}var ki={},Fs;function ah(){return Fs||(Fs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ki)),ki}var Ms;function ha(){return Ms||(Ms=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pi;e.__exportStar(oh(),t),e.__exportStar(ah(),t)}(Wi)),Wi}var js;function ch(){if(js)return or;js=1,Object.defineProperty(or,"__esModule",{value:!0}),or.fromMiliseconds=or.toMiliseconds=void 0;const t=ha();function e(i){return i*t.ONE_THOUSAND}or.toMiliseconds=e;function r(i){return Math.floor(i/t.ONE_THOUSAND)}return or.fromMiliseconds=r,or}var Bs;function uh(){return Bs||(Bs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pi;e.__exportStar(sh(),t),e.__exportStar(ch(),t)}(Hi)),Hi}var wr={},qs;function lh(){if(qs)return wr;qs=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return wr.Watch=t,wr.default=t,wr}var Gi={},Mr={},zs;function hh(){if(zs)return Mr;zs=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.IWatch=void 0;class t{}return Mr.IWatch=t,Mr}var Ks;function fh(){return Ks||(Ks=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Pi.__exportStar(hh(),t)}(Gi)),Gi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pi;e.__exportStar(uh(),t),e.__exportStar(lh(),t),e.__exportStar(fh(),t),e.__exportStar(ha(),t)})(Q);var Yi={},jr={};let pr=class{};var dh=Object.freeze({__proto__:null,IEvents:pr}),ph=Qt(dh),Vs;function gh(){if(Vs)return jr;Vs=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.IHeartBeat=void 0;const t=ph;class e extends t.IEvents{constructor(i){super()}}return jr.IHeartBeat=e,jr}var Hs;function fa(){return Hs||(Hs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ti.__exportStar(gh(),t)}(Yi)),Yi}var Ji={},cr={},Ws;function yh(){if(Ws)return cr;Ws=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.HEARTBEAT_EVENTS=cr.HEARTBEAT_INTERVAL=void 0;const t=Q;return cr.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,cr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},cr}var ks;function da(){return ks||(ks=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ti.__exportStar(yh(),t)}(Ji)),Ji}var Gs;function _h(){if(Gs)return Ur;Gs=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.HeartBeat=void 0;const t=Ti,e=Ml,r=Q,i=fa(),n=da();class s extends i.IHeartBeat{constructor(c){super(c),this.events=new e.EventEmitter,this.interval=n.HEARTBEAT_INTERVAL,this.interval=c?.interval||n.HEARTBEAT_INTERVAL}static init(c){return t.__awaiter(this,void 0,void 0,function*(){const h=new s(c);return yield h.init(),h})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(c,h){this.events.on(c,h)}once(c,h){this.events.once(c,h)}off(c,h){this.events.off(c,h)}removeListener(c,h){this.events.removeListener(c,h)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(n.HEARTBEAT_EVENTS.pulse)}}return Ur.HeartBeat=s,Ur}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ti;e.__exportStar(_h(),t),e.__exportStar(fa(),t),e.__exportStar(da(),t)})(Or);var me={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mn=function(t,e){return mn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},mn(t,e)};function bh(t,e){mn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var vn=function(){return vn=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},vn.apply(this,arguments)};function wh(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function mh(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function vh(t,e){return function(r,i){e(r,i,t)}}function Eh(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Dh(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(f){try{l(i.next(f))}catch(w){a(w)}}function h(f){try{l(i.throw(f))}catch(w){a(w)}}function l(f){f.done?s(f.value):n(f.value).then(c,h)}l((i=i.apply(t,e||[])).next())})}function Sh(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return h([l,f])}}function h(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Oh(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function xh(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function En(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pa(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function Ih(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(pa(arguments[e]));return t}function Ah(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}function Xr(t){return this instanceof Xr?(this.v=t,this):new Xr(t)}function Th(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(y){i[y]&&(n[y]=function(v){return new Promise(function(S,C){s.push([y,v,S,C])>1||c(y,v)})})}function c(y,v){try{h(i[y](v))}catch(S){w(s[0][3],S)}}function h(y){y.value instanceof Xr?Promise.resolve(y.value.v).then(l,f):w(s[0][2],y)}function l(y){c("next",y)}function f(y){c("throw",y)}function w(y,v){y(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Ph(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(a){return(r=!r)?{value:Xr(t[n](a)),done:n==="return"}:s?s(a):a}:s}}function Ch(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof En=="function"?En(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(a){return new Promise(function(c,h){a=t[s](a),n(c,h,a.done,a.value)})}}function n(s,a,c,h){Promise.resolve(h).then(function(l){s({value:l,done:c})},a)}}function Nh(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Rh(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function $h(t){return t&&t.__esModule?t:{default:t}}function Lh(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Uh(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Fh=Object.freeze({__proto__:null,get __assign(){return vn},__asyncDelegator:Ph,__asyncGenerator:Th,__asyncValues:Ch,__await:Xr,__awaiter:Dh,__classPrivateFieldGet:Lh,__classPrivateFieldSet:Uh,__createBinding:Oh,__decorate:mh,__exportStar:xh,__extends:bh,__generator:Sh,__importDefault:$h,__importStar:Rh,__makeTemplateObject:Nh,__metadata:Eh,__param:vh,__read:pa,__rest:wh,__spread:Ih,__spreadArrays:Ah,__values:En}),Mh=Qt(Fh),Xi,Ys;function jh(){if(Ys)return Xi;Ys=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Xi=e;function e(r,i,n){var s=n&&n.stringify||t,a=1;if(typeof r=="object"&&r!==null){var c=i.length+a;if(c===1)return r;var h=new Array(c);h[0]=s(r);for(var l=1;l<c;l++)h[l]=s(i[l]);return h.join(" ")}if(typeof r!="string")return r;var f=i.length;if(f===0)return r;for(var w="",y=1-a,v=-1,S=r&&r.length||0,C=0;C<S;){if(r.charCodeAt(C)===37&&C+1<S){switch(v=v>-1?v:0,r.charCodeAt(C+1)){case 100:case 102:if(y>=f||i[y]==null)break;v<C&&(w+=r.slice(v,C)),w+=Number(i[y]),v=C+2,C++;break;case 105:if(y>=f||i[y]==null)break;v<C&&(w+=r.slice(v,C)),w+=Math.floor(Number(i[y])),v=C+2,C++;break;case 79:case 111:case 106:if(y>=f||i[y]===void 0)break;v<C&&(w+=r.slice(v,C));var N=typeof i[y];if(N==="string"){w+="'"+i[y]+"'",v=C+2,C++;break}if(N==="function"){w+=i[y].name||"<anonymous>",v=C+2,C++;break}w+=s(i[y]),v=C+2,C++;break;case 115:if(y>=f)break;v<C&&(w+=r.slice(v,C)),w+=String(i[y]),v=C+2,C++;break;case 37:v<C&&(w+=r.slice(v,C)),w+="%",v=C+2,C++,y--;break}++y}++C}return v===-1?r:(v<S&&(w+=r.slice(v)),w)}return Xi}var Qi,Js;function Bh(){if(Js)return Qi;Js=1;const t=jh();Qi=n;const e=E().console||{},r={mapHttpRequest:S,mapHttpResponse:S,wrapRequestSerializer:C,wrapResponseSerializer:C,wrapErrorSerializer:C,req:S,res:S,err:y};function i(p,o){return Array.isArray(p)?p.filter(function(R){return R!=="!stdSerializers.err"}):p===!0?Object.keys(o):!1}function n(p){p=p||{},p.browser=p.browser||{};const o=p.browser.transmit;if(o&&typeof o.send!="function")throw Error("pino: transmit option must have a send function");const d=p.browser.write||e;p.browser.write&&(p.browser.asObject=!0);const R=p.serializers||{},$=i(p.browser.serialize,R);let L=p.browser.serialize;Array.isArray(p.browser.serialize)&&p.browser.serialize.indexOf("!stdSerializers.err")>-1&&(L=!1);const U=["error","fatal","warn","info","debug","trace"];typeof d=="function"&&(d.error=d.fatal=d.warn=d.info=d.debug=d.trace=d),p.enabled===!1&&(p.level="silent");const z=p.level||"info",b=Object.create(d);b.log||(b.log=N),Object.defineProperty(b,"levelVal",{get:k}),Object.defineProperty(b,"level",{get:B,set:M});const A={transmit:o,serialize:$,asObject:p.browser.asObject,levels:U,timestamp:v(p)};b.levels=n.levels,b.level=z,b.setMaxListeners=b.getMaxListeners=b.emit=b.addListener=b.on=b.prependListener=b.once=b.prependOnceListener=b.removeListener=b.removeAllListeners=b.listeners=b.listenerCount=b.eventNames=b.write=b.flush=N,b.serializers=R,b._serialize=$,b._stdErrSerialize=L,b.child=q,o&&(b._logEvent=w());function k(){return this.level==="silent"?1/0:this.levels.values[this.level]}function B(){return this._level}function M(F){if(F!=="silent"&&!this.levels.values[F])throw Error("unknown level "+F);this._level=F,s(A,b,"error","log"),s(A,b,"fatal","error"),s(A,b,"warn","error"),s(A,b,"info","log"),s(A,b,"debug","log"),s(A,b,"trace","log")}function q(F,V){if(!F)throw new Error("missing bindings for child Pino");V=V||{},$&&F.serializers&&(V.serializers=F.serializers);const te=V.serializers;if($&&te){var H=Object.assign({},R,te),Z=p.browser.serialize===!0?Object.keys(H):$;delete F.serializers,h([F],Z,H,this._stdErrSerialize)}function J(ee){this._childLevel=(ee._childLevel|0)+1,this.error=l(ee,F,"error"),this.fatal=l(ee,F,"fatal"),this.warn=l(ee,F,"warn"),this.info=l(ee,F,"info"),this.debug=l(ee,F,"debug"),this.trace=l(ee,F,"trace"),H&&(this.serializers=H,this._serialize=Z),o&&(this._logEvent=w([].concat(ee._logEvent.bindings,F)))}return J.prototype=this,new J(this)}return b}n.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},n.stdSerializers=r,n.stdTimeFunctions=Object.assign({},{nullTime:K,epochTime:D,unixTime:I,isoTime:_});function s(p,o,d,R){const $=Object.getPrototypeOf(o);o[d]=o.levelVal>o.levels.values[d]?N:$[d]?$[d]:e[d]||e[R]||N,a(p,o,d)}function a(p,o,d){!p.transmit&&o[d]===N||(o[d]=function(R){return function(){const L=p.timestamp(),U=new Array(arguments.length),z=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var b=0;b<U.length;b++)U[b]=arguments[b];if(p.serialize&&!p.asObject&&h(U,this._serialize,this.serializers,this._stdErrSerialize),p.asObject?R.call(z,c(this,d,U,L)):R.apply(z,U),p.transmit){const A=p.transmit.level||o.level,k=n.levels.values[A],B=n.levels.values[d];if(B<k)return;f(this,{ts:L,methodLevel:d,methodValue:B,transmitLevel:A,transmitValue:n.levels.values[p.transmit.level||o.level],send:p.transmit.send,val:o.levelVal},U)}}}(o[d]))}function c(p,o,d,R){p._serialize&&h(d,p._serialize,p.serializers,p._stdErrSerialize);const $=d.slice();let L=$[0];const U={};R&&(U.time=R),U.level=n.levels.values[o];let z=(p._childLevel|0)+1;if(z<1&&(z=1),L!==null&&typeof L=="object"){for(;z--&&typeof $[0]=="object";)Object.assign(U,$.shift());L=$.length?t($.shift(),$):void 0}else typeof L=="string"&&(L=t($.shift(),$));return L!==void 0&&(U.msg=L),U}function h(p,o,d,R){for(const $ in p)if(R&&p[$]instanceof Error)p[$]=n.stdSerializers.err(p[$]);else if(typeof p[$]=="object"&&!Array.isArray(p[$]))for(const L in p[$])o&&o.indexOf(L)>-1&&L in d&&(p[$][L]=d[L](p[$][L]))}function l(p,o,d){return function(){const R=new Array(1+arguments.length);R[0]=o;for(var $=1;$<R.length;$++)R[$]=arguments[$-1];return p[d].apply(this,R)}}function f(p,o,d){const R=o.send,$=o.ts,L=o.methodLevel,U=o.methodValue,z=o.val,b=p._logEvent.bindings;h(d,p._serialize||Object.keys(p.serializers),p.serializers,p._stdErrSerialize===void 0?!0:p._stdErrSerialize),p._logEvent.ts=$,p._logEvent.messages=d.filter(function(A){return b.indexOf(A)===-1}),p._logEvent.level.label=L,p._logEvent.level.value=U,R(L,p._logEvent,z),p._logEvent=w(b)}function w(p){return{ts:0,messages:[],bindings:p||[],level:{label:"",value:0}}}function y(p){const o={type:p.constructor.name,msg:p.message,stack:p.stack};for(const d in p)o[d]===void 0&&(o[d]=p[d]);return o}function v(p){return typeof p.timestamp=="function"?p.timestamp:p.timestamp===!1?K:D}function S(){return{}}function C(p){return p}function N(){}function K(){return!1}function D(){return Date.now()}function I(){return Math.round(Date.now()/1e3)}function _(){return new Date(Date.now()).toISOString()}function E(){function p(o){return typeof o<"u"&&o}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return p(self)||p(window)||p(this)||{}}}return Qi}var ur={},Xs;function ga(){return Xs||(Xs=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.PINO_CUSTOM_CONTEXT_KEY=ur.PINO_LOGGER_DEFAULTS=void 0,ur.PINO_LOGGER_DEFAULTS={level:"info"},ur.PINO_CUSTOM_CONTEXT_KEY="custom_context"),ur}var ht={},Qs;function qh(){if(Qs)return ht;Qs=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.generateChildLogger=ht.formatChildLoggerContext=ht.getLoggerContext=ht.setBrowserLoggerContext=ht.getBrowserLoggerContext=ht.getDefaultLoggerOptions=void 0;const t=ga();function e(c){return Object.assign(Object.assign({},c),{level:c?.level||t.PINO_LOGGER_DEFAULTS.level})}ht.getDefaultLoggerOptions=e;function r(c,h=t.PINO_CUSTOM_CONTEXT_KEY){return c[h]||""}ht.getBrowserLoggerContext=r;function i(c,h,l=t.PINO_CUSTOM_CONTEXT_KEY){return c[l]=h,c}ht.setBrowserLoggerContext=i;function n(c,h=t.PINO_CUSTOM_CONTEXT_KEY){let l="";return typeof c.bindings>"u"?l=r(c,h):l=c.bindings().context||"",l}ht.getLoggerContext=n;function s(c,h,l=t.PINO_CUSTOM_CONTEXT_KEY){const f=n(c,l);return f.trim()?`${f}/${h}`:h}ht.formatChildLoggerContext=s;function a(c,h,l=t.PINO_CUSTOM_CONTEXT_KEY){const f=s(c,h,l),w=c.child({context:f});return i(w,f,l)}return ht.generateChildLogger=a,ht}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Mh,r=e.__importDefault(Bh());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(ga(),t),e.__exportStar(qh(),t)})(me);class zh extends pr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class Kh extends pr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}let Vh=class{constructor(e,r){this.logger=e,this.core=r}};class Hh extends pr{constructor(e,r){super(),this.relayer=e,this.logger=r}}let Wh=class extends pr{constructor(e){super()}},kh=class{constructor(e,r,i,n){this.core=e,this.logger=r,this.name=i}},Gh=class extends pr{constructor(e,r){super(),this.relayer=e,this.logger=r}},Yh=class extends pr{constructor(e,r){super(),this.core=e,this.logger=r}},Jh=class{constructor(e,r){this.projectId=e,this.logger=r}},Xh=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Qh=class{constructor(e){this.client=e}};const Zh=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),ef=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function ya(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return ef(t)}catch{return t}}function qn(t){return typeof t=="string"?t:Zh(t)||""}var zn={},xr={},Ci={},Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});Ni.BrowserRandomSource=void 0;const Zs=65536;class tf{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let i=0;i<r.length;i+=Zs)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,Zs)));return r}}Ni.BrowserRandomSource=tf;function rf(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ri={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});function nf(t){for(var e=0;e<t.length;e++)t[e]=0;return t}vt.wipe=nf;var sf={},of=Object.freeze({__proto__:null,default:sf}),af=Qt(of);Object.defineProperty(Ri,"__esModule",{value:!0});Ri.NodeRandomSource=void 0;const cf=vt;class uf{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof rf<"u"){const e=af;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let n=0;n<i.length;n++)i[n]=r[n];return(0,cf.wipe)(r),i}}Ri.NodeRandomSource=uf;Object.defineProperty(Ci,"__esModule",{value:!0});Ci.SystemRandomSource=void 0;const lf=Ni,hf=Ri;class ff{constructor(){if(this.isAvailable=!1,this.name="",this._source=new lf.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new hf.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ci.SystemRandomSource=ff;var ne={},_a={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(c,h){var l=c>>>16&65535,f=c&65535,w=h>>>16&65535,y=h&65535;return f*y+(l*y+f*w<<16>>>0)|0}t.mul=Math.imul||e;function r(c,h){return c+h|0}t.add=r;function i(c,h){return c-h|0}t.sub=i;function n(c,h){return c<<h|c>>>32-h}t.rotl=n;function s(c,h){return c<<32-h|c>>>h}t.rotr=s;function a(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c}t.isInteger=Number.isInteger||a,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(c){return t.isInteger(c)&&c>=-t.MAX_SAFE_INTEGER&&c<=t.MAX_SAFE_INTEGER}})(_a);Object.defineProperty(ne,"__esModule",{value:!0});var ba=_a;function df(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}ne.readInt16BE=df;function pf(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}ne.readUint16BE=pf;function gf(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}ne.readInt16LE=gf;function yf(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}ne.readUint16LE=yf;function wa(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}ne.writeUint16BE=wa;ne.writeInt16BE=wa;function ma(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}ne.writeUint16LE=ma;ne.writeInt16LE=ma;function Dn(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}ne.readInt32BE=Dn;function Sn(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}ne.readUint32BE=Sn;function On(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}ne.readInt32LE=On;function xn(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}ne.readUint32LE=xn;function mi(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}ne.writeUint32BE=mi;ne.writeInt32BE=mi;function vi(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}ne.writeUint32LE=vi;ne.writeInt32LE=vi;function _f(t,e){e===void 0&&(e=0);var r=Dn(t,e),i=Dn(t,e+4);return r*4294967296+i-(i>>31)*4294967296}ne.readInt64BE=_f;function bf(t,e){e===void 0&&(e=0);var r=Sn(t,e),i=Sn(t,e+4);return r*4294967296+i}ne.readUint64BE=bf;function wf(t,e){e===void 0&&(e=0);var r=On(t,e),i=On(t,e+4);return i*4294967296+r-(r>>31)*4294967296}ne.readInt64LE=wf;function mf(t,e){e===void 0&&(e=0);var r=xn(t,e),i=xn(t,e+4);return i*4294967296+r}ne.readUint64LE=mf;function va(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),mi(t/4294967296>>>0,e,r),mi(t>>>0,e,r+4),e}ne.writeUint64BE=va;ne.writeInt64BE=va;function Ea(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),vi(t>>>0,e,r),vi(t/4294967296>>>0,e,r+4),e}ne.writeUint64LE=Ea;ne.writeInt64LE=Ea;function vf(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,s=t/8+r-1;s>=r;s--)i+=e[s]*n,n*=256;return i}ne.readUintBE=vf;function Ef(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,s=r;s<r+t/8;s++)i+=e[s]*n,n*=256;return i}ne.readUintLE=Ef;function Df(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ba.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,s=t/8+i-1;s>=i;s--)r[s]=e/n&255,n*=256;return r}ne.writeUintBE=Df;function Sf(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ba.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,s=i;s<i+t/8;s++)r[s]=e/n&255,n*=256;return r}ne.writeUintLE=Sf;function Of(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}ne.readFloat32BE=Of;function xf(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}ne.readFloat32LE=xf;function If(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}ne.readFloat64BE=If;function Af(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}ne.readFloat64LE=Af;function Tf(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}ne.writeFloat32BE=Tf;function Pf(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}ne.writeFloat32LE=Pf;function Cf(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}ne.writeFloat64BE=Cf;function Nf(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}ne.writeFloat64LE=Nf;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Ci,r=ne,i=vt;t.defaultRandomSource=new e.SystemRandomSource;function n(l,f=t.defaultRandomSource){return f.randomBytes(l)}t.randomBytes=n;function s(l=t.defaultRandomSource){const f=n(4,l),w=(0,r.readUint32LE)(f);return(0,i.wipe)(f),w}t.randomUint32=s;const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(l,f=a,w=t.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let y="";const v=f.length,S=256-256%v;for(;l>0;){const C=n(Math.ceil(l*256/S),w);for(let N=0;N<C.length&&l>0;N++){const K=C[N];K<S&&(y+=f.charAt(K%v),l--)}(0,i.wipe)(C)}return y}t.randomString=c;function h(l,f=a,w=t.defaultRandomSource){const y=Math.ceil(l/(Math.log(f.length)/Math.LN2));return c(y,f,w)}t.randomStringForEntropy=h})(xr);var Da={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ne,r=vt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var i=function(){function c(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return c.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},c.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},c.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},c.prototype.update=function(h,l){if(l===void 0&&(l=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},c.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,w=l/536870912|0,y=l<<3,v=l%128<112?128:256;this._buffer[f]=128;for(var S=f+1;S<v-8;S++)this._buffer[S]=0;e.writeUint32BE(w,this._buffer,v-8),e.writeUint32BE(y,this._buffer,v-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,v),this._finished=!0}for(var S=0;S<this.digestLength/8;S++)e.writeUint32BE(this._stateHi[S],h,S*8),e.writeUint32BE(this._stateLo[S],h,S*8+4);return this},c.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},c.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},c.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},c.prototype.cleanSavedState=function(h){r.wipe(h.stateHi),r.wipe(h.stateLo),h.buffer&&r.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},c}();t.SHA512=i;var n=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(c,h,l,f,w,y,v){for(var S=l[0],C=l[1],N=l[2],K=l[3],D=l[4],I=l[5],_=l[6],E=l[7],p=f[0],o=f[1],d=f[2],R=f[3],$=f[4],L=f[5],U=f[6],z=f[7],b,A,k,B,M,q,F,V;v>=128;){for(var te=0;te<16;te++){var H=8*te+y;c[te]=e.readUint32BE(w,H),h[te]=e.readUint32BE(w,H+4)}for(var te=0;te<80;te++){var Z=S,J=C,ee=N,P=K,T=D,O=I,u=_,m=E,W=p,Y=o,fe=d,be=R,pe=$,Ee=L,Ue=U,Ce=z;if(b=E,A=z,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=(D>>>14|$<<32-14)^(D>>>18|$<<32-18)^($>>>41-32|D<<32-(41-32)),A=($>>>14|D<<32-14)^($>>>18|D<<32-18)^(D>>>41-32|$<<32-(41-32)),M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,b=D&I^~D&_,A=$&L^~$&U,M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,b=n[te*2],A=n[te*2+1],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,b=c[te%16],A=h[te%16],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,k=F&65535|V<<16,B=M&65535|q<<16,b=k,A=B,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=(S>>>28|p<<32-28)^(p>>>34-32|S<<32-(34-32))^(p>>>39-32|S<<32-(39-32)),A=(p>>>28|S<<32-28)^(S>>>34-32|p<<32-(34-32))^(S>>>39-32|p<<32-(39-32)),M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,b=S&C^S&N^C&N,A=p&o^p&d^o&d,M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,m=F&65535|V<<16,Ce=M&65535|q<<16,b=P,A=be,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=k,A=B,M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,P=F&65535|V<<16,be=M&65535|q<<16,C=Z,N=J,K=ee,D=P,I=T,_=O,E=u,S=m,o=W,d=Y,R=fe,$=be,L=pe,U=Ee,z=Ue,p=Ce,te%16===15)for(var H=0;H<16;H++)b=c[H],A=h[H],M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=c[(H+9)%16],A=h[(H+9)%16],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,k=c[(H+1)%16],B=h[(H+1)%16],b=(k>>>1|B<<32-1)^(k>>>8|B<<32-8)^k>>>7,A=(B>>>1|k<<32-1)^(B>>>8|k<<32-8)^(B>>>7|k<<32-7),M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,k=c[(H+14)%16],B=h[(H+14)%16],b=(k>>>19|B<<32-19)^(B>>>61-32|k<<32-(61-32))^k>>>6,A=(B>>>19|k<<32-19)^(k>>>61-32|B<<32-(61-32))^(B>>>6|k<<32-6),M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,c[H]=F&65535|V<<16,h[H]=M&65535|q<<16}b=S,A=p,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[0],A=f[0],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[0]=S=F&65535|V<<16,f[0]=p=M&65535|q<<16,b=C,A=o,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[1],A=f[1],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[1]=C=F&65535|V<<16,f[1]=o=M&65535|q<<16,b=N,A=d,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[2],A=f[2],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[2]=N=F&65535|V<<16,f[2]=d=M&65535|q<<16,b=K,A=R,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[3],A=f[3],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[3]=K=F&65535|V<<16,f[3]=R=M&65535|q<<16,b=D,A=$,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[4],A=f[4],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[4]=D=F&65535|V<<16,f[4]=$=M&65535|q<<16,b=I,A=L,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[5],A=f[5],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[5]=I=F&65535|V<<16,f[5]=L=M&65535|q<<16,b=_,A=U,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[6],A=f[6],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[6]=_=F&65535|V<<16,f[6]=U=M&65535|q<<16,b=E,A=z,M=A&65535,q=A>>>16,F=b&65535,V=b>>>16,b=l[7],A=f[7],M+=A&65535,q+=A>>>16,F+=b&65535,V+=b>>>16,q+=M>>>16,F+=q>>>16,V+=F>>>16,l[7]=E=F&65535|V<<16,f[7]=z=M&65535|q<<16,y+=128,v-=128}return y}function a(c){var h=new i;h.update(c);var l=h.digest();return h.clean(),l}t.hash=a})(Da);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=xr,r=Da,i=vt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function n(P){const T=new Float64Array(16);if(P)for(let O=0;O<P.length;O++)T[O]=P[O];return T}const s=new Uint8Array(32);s[0]=9;const a=n(),c=n([1]),h=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function v(P,T){for(let O=0;O<16;O++)P[O]=T[O]|0}function S(P){let T=1;for(let O=0;O<16;O++){let u=P[O]+T+65535;T=Math.floor(u/65536),P[O]=u-T*65536}P[0]+=T-1+37*(T-1)}function C(P,T,O){const u=~(O-1);for(let m=0;m<16;m++){const W=u&(P[m]^T[m]);P[m]^=W,T[m]^=W}}function N(P,T){const O=n(),u=n();for(let m=0;m<16;m++)u[m]=T[m];S(u),S(u),S(u);for(let m=0;m<2;m++){O[0]=u[0]-65517;for(let Y=1;Y<15;Y++)O[Y]=u[Y]-65535-(O[Y-1]>>16&1),O[Y-1]&=65535;O[15]=u[15]-32767-(O[14]>>16&1);const W=O[15]>>16&1;O[14]&=65535,C(u,O,1-W)}for(let m=0;m<16;m++)P[2*m]=u[m]&255,P[2*m+1]=u[m]>>8}function K(P,T){let O=0;for(let u=0;u<32;u++)O|=P[u]^T[u];return(1&O-1>>>8)-1}function D(P,T){const O=new Uint8Array(32),u=new Uint8Array(32);return N(O,P),N(u,T),K(O,u)}function I(P){const T=new Uint8Array(32);return N(T,P),T[0]&1}function _(P,T){for(let O=0;O<16;O++)P[O]=T[2*O]+(T[2*O+1]<<8);P[15]&=32767}function E(P,T,O){for(let u=0;u<16;u++)P[u]=T[u]+O[u]}function p(P,T,O){for(let u=0;u<16;u++)P[u]=T[u]-O[u]}function o(P,T,O){let u,m,W=0,Y=0,fe=0,be=0,pe=0,Ee=0,Ue=0,Ce=0,_e=0,ge=0,de=0,le=0,ue=0,ce=0,oe=0,re=0,he=0,ye=0,ie=0,we=0,ve=0,Se=0,Oe=0,De=0,xt=0,Ct=0,zt=0,bt=0,er=0,Tr=0,ai=0,Fe=O[0],Ne=O[1],Me=O[2],je=O[3],Be=O[4],Re=O[5],Ve=O[6],He=O[7],We=O[8],ke=O[9],Ge=O[10],Ke=O[11],qe=O[12],Ae=O[13],Ye=O[14],Je=O[15];u=T[0],W+=u*Fe,Y+=u*Ne,fe+=u*Me,be+=u*je,pe+=u*Be,Ee+=u*Re,Ue+=u*Ve,Ce+=u*He,_e+=u*We,ge+=u*ke,de+=u*Ge,le+=u*Ke,ue+=u*qe,ce+=u*Ae,oe+=u*Ye,re+=u*Je,u=T[1],Y+=u*Fe,fe+=u*Ne,be+=u*Me,pe+=u*je,Ee+=u*Be,Ue+=u*Re,Ce+=u*Ve,_e+=u*He,ge+=u*We,de+=u*ke,le+=u*Ge,ue+=u*Ke,ce+=u*qe,oe+=u*Ae,re+=u*Ye,he+=u*Je,u=T[2],fe+=u*Fe,be+=u*Ne,pe+=u*Me,Ee+=u*je,Ue+=u*Be,Ce+=u*Re,_e+=u*Ve,ge+=u*He,de+=u*We,le+=u*ke,ue+=u*Ge,ce+=u*Ke,oe+=u*qe,re+=u*Ae,he+=u*Ye,ye+=u*Je,u=T[3],be+=u*Fe,pe+=u*Ne,Ee+=u*Me,Ue+=u*je,Ce+=u*Be,_e+=u*Re,ge+=u*Ve,de+=u*He,le+=u*We,ue+=u*ke,ce+=u*Ge,oe+=u*Ke,re+=u*qe,he+=u*Ae,ye+=u*Ye,ie+=u*Je,u=T[4],pe+=u*Fe,Ee+=u*Ne,Ue+=u*Me,Ce+=u*je,_e+=u*Be,ge+=u*Re,de+=u*Ve,le+=u*He,ue+=u*We,ce+=u*ke,oe+=u*Ge,re+=u*Ke,he+=u*qe,ye+=u*Ae,ie+=u*Ye,we+=u*Je,u=T[5],Ee+=u*Fe,Ue+=u*Ne,Ce+=u*Me,_e+=u*je,ge+=u*Be,de+=u*Re,le+=u*Ve,ue+=u*He,ce+=u*We,oe+=u*ke,re+=u*Ge,he+=u*Ke,ye+=u*qe,ie+=u*Ae,we+=u*Ye,ve+=u*Je,u=T[6],Ue+=u*Fe,Ce+=u*Ne,_e+=u*Me,ge+=u*je,de+=u*Be,le+=u*Re,ue+=u*Ve,ce+=u*He,oe+=u*We,re+=u*ke,he+=u*Ge,ye+=u*Ke,ie+=u*qe,we+=u*Ae,ve+=u*Ye,Se+=u*Je,u=T[7],Ce+=u*Fe,_e+=u*Ne,ge+=u*Me,de+=u*je,le+=u*Be,ue+=u*Re,ce+=u*Ve,oe+=u*He,re+=u*We,he+=u*ke,ye+=u*Ge,ie+=u*Ke,we+=u*qe,ve+=u*Ae,Se+=u*Ye,Oe+=u*Je,u=T[8],_e+=u*Fe,ge+=u*Ne,de+=u*Me,le+=u*je,ue+=u*Be,ce+=u*Re,oe+=u*Ve,re+=u*He,he+=u*We,ye+=u*ke,ie+=u*Ge,we+=u*Ke,ve+=u*qe,Se+=u*Ae,Oe+=u*Ye,De+=u*Je,u=T[9],ge+=u*Fe,de+=u*Ne,le+=u*Me,ue+=u*je,ce+=u*Be,oe+=u*Re,re+=u*Ve,he+=u*He,ye+=u*We,ie+=u*ke,we+=u*Ge,ve+=u*Ke,Se+=u*qe,Oe+=u*Ae,De+=u*Ye,xt+=u*Je,u=T[10],de+=u*Fe,le+=u*Ne,ue+=u*Me,ce+=u*je,oe+=u*Be,re+=u*Re,he+=u*Ve,ye+=u*He,ie+=u*We,we+=u*ke,ve+=u*Ge,Se+=u*Ke,Oe+=u*qe,De+=u*Ae,xt+=u*Ye,Ct+=u*Je,u=T[11],le+=u*Fe,ue+=u*Ne,ce+=u*Me,oe+=u*je,re+=u*Be,he+=u*Re,ye+=u*Ve,ie+=u*He,we+=u*We,ve+=u*ke,Se+=u*Ge,Oe+=u*Ke,De+=u*qe,xt+=u*Ae,Ct+=u*Ye,zt+=u*Je,u=T[12],ue+=u*Fe,ce+=u*Ne,oe+=u*Me,re+=u*je,he+=u*Be,ye+=u*Re,ie+=u*Ve,we+=u*He,ve+=u*We,Se+=u*ke,Oe+=u*Ge,De+=u*Ke,xt+=u*qe,Ct+=u*Ae,zt+=u*Ye,bt+=u*Je,u=T[13],ce+=u*Fe,oe+=u*Ne,re+=u*Me,he+=u*je,ye+=u*Be,ie+=u*Re,we+=u*Ve,ve+=u*He,Se+=u*We,Oe+=u*ke,De+=u*Ge,xt+=u*Ke,Ct+=u*qe,zt+=u*Ae,bt+=u*Ye,er+=u*Je,u=T[14],oe+=u*Fe,re+=u*Ne,he+=u*Me,ye+=u*je,ie+=u*Be,we+=u*Re,ve+=u*Ve,Se+=u*He,Oe+=u*We,De+=u*ke,xt+=u*Ge,Ct+=u*Ke,zt+=u*qe,bt+=u*Ae,er+=u*Ye,Tr+=u*Je,u=T[15],re+=u*Fe,he+=u*Ne,ye+=u*Me,ie+=u*je,we+=u*Be,ve+=u*Re,Se+=u*Ve,Oe+=u*He,De+=u*We,xt+=u*ke,Ct+=u*Ge,zt+=u*Ke,bt+=u*qe,er+=u*Ae,Tr+=u*Ye,ai+=u*Je,W+=38*he,Y+=38*ye,fe+=38*ie,be+=38*we,pe+=38*ve,Ee+=38*Se,Ue+=38*Oe,Ce+=38*De,_e+=38*xt,ge+=38*Ct,de+=38*zt,le+=38*bt,ue+=38*er,ce+=38*Tr,oe+=38*ai,m=1,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=Y+m+65535,m=Math.floor(u/65536),Y=u-m*65536,u=fe+m+65535,m=Math.floor(u/65536),fe=u-m*65536,u=be+m+65535,m=Math.floor(u/65536),be=u-m*65536,u=pe+m+65535,m=Math.floor(u/65536),pe=u-m*65536,u=Ee+m+65535,m=Math.floor(u/65536),Ee=u-m*65536,u=Ue+m+65535,m=Math.floor(u/65536),Ue=u-m*65536,u=Ce+m+65535,m=Math.floor(u/65536),Ce=u-m*65536,u=_e+m+65535,m=Math.floor(u/65536),_e=u-m*65536,u=ge+m+65535,m=Math.floor(u/65536),ge=u-m*65536,u=de+m+65535,m=Math.floor(u/65536),de=u-m*65536,u=le+m+65535,m=Math.floor(u/65536),le=u-m*65536,u=ue+m+65535,m=Math.floor(u/65536),ue=u-m*65536,u=ce+m+65535,m=Math.floor(u/65536),ce=u-m*65536,u=oe+m+65535,m=Math.floor(u/65536),oe=u-m*65536,u=re+m+65535,m=Math.floor(u/65536),re=u-m*65536,W+=m-1+37*(m-1),m=1,u=W+m+65535,m=Math.floor(u/65536),W=u-m*65536,u=Y+m+65535,m=Math.floor(u/65536),Y=u-m*65536,u=fe+m+65535,m=Math.floor(u/65536),fe=u-m*65536,u=be+m+65535,m=Math.floor(u/65536),be=u-m*65536,u=pe+m+65535,m=Math.floor(u/65536),pe=u-m*65536,u=Ee+m+65535,m=Math.floor(u/65536),Ee=u-m*65536,u=Ue+m+65535,m=Math.floor(u/65536),Ue=u-m*65536,u=Ce+m+65535,m=Math.floor(u/65536),Ce=u-m*65536,u=_e+m+65535,m=Math.floor(u/65536),_e=u-m*65536,u=ge+m+65535,m=Math.floor(u/65536),ge=u-m*65536,u=de+m+65535,m=Math.floor(u/65536),de=u-m*65536,u=le+m+65535,m=Math.floor(u/65536),le=u-m*65536,u=ue+m+65535,m=Math.floor(u/65536),ue=u-m*65536,u=ce+m+65535,m=Math.floor(u/65536),ce=u-m*65536,u=oe+m+65535,m=Math.floor(u/65536),oe=u-m*65536,u=re+m+65535,m=Math.floor(u/65536),re=u-m*65536,W+=m-1+37*(m-1),P[0]=W,P[1]=Y,P[2]=fe,P[3]=be,P[4]=pe,P[5]=Ee,P[6]=Ue,P[7]=Ce,P[8]=_e,P[9]=ge,P[10]=de,P[11]=le,P[12]=ue,P[13]=ce,P[14]=oe,P[15]=re}function d(P,T){o(P,T,T)}function R(P,T){const O=n();let u;for(u=0;u<16;u++)O[u]=T[u];for(u=253;u>=0;u--)d(O,O),u!==2&&u!==4&&o(O,O,T);for(u=0;u<16;u++)P[u]=O[u]}function $(P,T){const O=n();let u;for(u=0;u<16;u++)O[u]=T[u];for(u=250;u>=0;u--)d(O,O),u!==1&&o(O,O,T);for(u=0;u<16;u++)P[u]=O[u]}function L(P,T){const O=n(),u=n(),m=n(),W=n(),Y=n(),fe=n(),be=n(),pe=n(),Ee=n();p(O,P[1],P[0]),p(Ee,T[1],T[0]),o(O,O,Ee),E(u,P[0],P[1]),E(Ee,T[0],T[1]),o(u,u,Ee),o(m,P[3],T[3]),o(m,m,l),o(W,P[2],T[2]),E(W,W,W),p(Y,u,O),p(fe,W,m),E(be,W,m),E(pe,u,O),o(P[0],Y,fe),o(P[1],pe,be),o(P[2],be,fe),o(P[3],Y,pe)}function U(P,T,O){for(let u=0;u<4;u++)C(P[u],T[u],O)}function z(P,T){const O=n(),u=n(),m=n();R(m,T[2]),o(O,T[0],m),o(u,T[1],m),N(P,u),P[31]^=I(O)<<7}function b(P,T,O){v(P[0],a),v(P[1],c),v(P[2],c),v(P[3],a);for(let u=255;u>=0;--u){const m=O[u/8|0]>>(u&7)&1;U(P,T,m),L(T,P),L(P,P),U(P,T,m)}}function A(P,T){const O=[n(),n(),n(),n()];v(O[0],f),v(O[1],w),v(O[2],c),o(O[3],f,w),b(P,O,T)}function k(P){if(P.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const T=(0,r.hash)(P);T[0]&=248,T[31]&=127,T[31]|=64;const O=new Uint8Array(32),u=[n(),n(),n(),n()];A(u,T),z(O,u);const m=new Uint8Array(64);return m.set(P),m.set(O,32),{publicKey:O,secretKey:m}}t.generateKeyPairFromSeed=k;function B(P){const T=(0,e.randomBytes)(32,P),O=k(T);return(0,i.wipe)(T),O}t.generateKeyPair=B;function M(P){if(P.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(P.subarray(32))}t.extractPublicKeyFromSecretKey=M;const q=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function F(P,T){let O,u,m,W;for(u=63;u>=32;--u){for(O=0,m=u-32,W=u-12;m<W;++m)T[m]+=O-16*T[u]*q[m-(u-32)],O=Math.floor((T[m]+128)/256),T[m]-=O*256;T[m]+=O,T[u]=0}for(O=0,m=0;m<32;m++)T[m]+=O-(T[31]>>4)*q[m],O=T[m]>>8,T[m]&=255;for(m=0;m<32;m++)T[m]-=O*q[m];for(u=0;u<32;u++)T[u+1]+=T[u]>>8,P[u]=T[u]&255}function V(P){const T=new Float64Array(64);for(let O=0;O<64;O++)T[O]=P[O];for(let O=0;O<64;O++)P[O]=0;F(P,T)}function te(P,T){const O=new Float64Array(64),u=[n(),n(),n(),n()],m=(0,r.hash)(P.subarray(0,32));m[0]&=248,m[31]&=127,m[31]|=64;const W=new Uint8Array(64);W.set(m.subarray(32),32);const Y=new r.SHA512;Y.update(W.subarray(32)),Y.update(T);const fe=Y.digest();Y.clean(),V(fe),A(u,fe),z(W,u),Y.reset(),Y.update(W.subarray(0,32)),Y.update(P.subarray(32)),Y.update(T);const be=Y.digest();V(be);for(let pe=0;pe<32;pe++)O[pe]=fe[pe];for(let pe=0;pe<32;pe++)for(let Ee=0;Ee<32;Ee++)O[pe+Ee]+=be[pe]*m[Ee];return F(W.subarray(32),O),W}t.sign=te;function H(P,T){const O=n(),u=n(),m=n(),W=n(),Y=n(),fe=n(),be=n();return v(P[2],c),_(P[1],T),d(m,P[1]),o(W,m,h),p(m,m,P[2]),E(W,P[2],W),d(Y,W),d(fe,Y),o(be,fe,Y),o(O,be,m),o(O,O,W),$(O,O),o(O,O,m),o(O,O,W),o(O,O,W),o(P[0],O,W),d(u,P[0]),o(u,u,W),D(u,m)&&o(P[0],P[0],y),d(u,P[0]),o(u,u,W),D(u,m)?-1:(I(P[0])===T[31]>>7&&p(P[0],a,P[0]),o(P[3],P[0],P[1]),0)}function Z(P,T,O){const u=new Uint8Array(32),m=[n(),n(),n(),n()],W=[n(),n(),n(),n()];if(O.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(H(W,P))return!1;const Y=new r.SHA512;Y.update(O.subarray(0,32)),Y.update(P),Y.update(T);const fe=Y.digest();return V(fe),b(m,W,fe),A(W,O.subarray(32)),L(m,W),z(u,m),!K(O,u)}t.verify=Z;function J(P){let T=[n(),n(),n(),n()];if(H(T,P))throw new Error("Ed25519: invalid public key");let O=n(),u=n(),m=T[1];E(O,c,m),p(u,c,m),R(u,u),o(O,O,u);let W=new Uint8Array(32);return N(W,O),W}t.convertPublicKeyToX25519=J;function ee(P){const T=(0,r.hash)(P.subarray(0,32));T[0]&=248,T[31]&=127,T[31]|=64;const O=new Uint8Array(T.subarray(0,32));return(0,i.wipe)(T),O}t.convertSecretKeyToX25519=ee})(zn);const Rf="EdDSA",$f="JWT",Sa=".",Oa="base64url",Lf="utf8",Uf="utf8",Ff=":",Mf="did",jf="key",eo="base58btc",Bf="z",qf="K36",zf=32;function Kn(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function xa(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Kn(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function In(t,e){e||(e=t.reduce((n,s)=>n+s.length,0));const r=xa(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return Kn(r)}function Kf(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=n}var c=t.length,h=t.charAt(0),l=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function w(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var C=0,N=0,K=0,D=S.length;K!==D&&S[K]===0;)K++,C++;for(var I=(D-K)*f+1>>>0,_=new Uint8Array(I);K!==D;){for(var E=S[K],p=0,o=I-1;(E!==0||p<N)&&o!==-1;o--,p++)E+=256*_[o]>>>0,_[o]=E%c>>>0,E=E/c>>>0;if(E!==0)throw new Error("Non-zero carry");N=p,K++}for(var d=I-N;d!==I&&_[d]===0;)d++;for(var R=h.repeat(C);d<I;++d)R+=t.charAt(_[d]);return R}function y(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var C=0;if(S[C]!==" "){for(var N=0,K=0;S[C]===h;)N++,C++;for(var D=(S.length-C)*l+1>>>0,I=new Uint8Array(D);S[C];){var _=r[S.charCodeAt(C)];if(_===255)return;for(var E=0,p=D-1;(_!==0||E<K)&&p!==-1;p--,E++)_+=c*I[p]>>>0,I[p]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");K=E,C++}if(S[C]!==" "){for(var o=D-K;o!==D&&I[o]===0;)o++;for(var d=new Uint8Array(N+(D-o)),R=N;o!==D;)d[R++]=I[o++];return d}}}function v(S){var C=y(S);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:y,decode:v}}var Vf=Kf,Hf=Vf;const Wf=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},kf=t=>new TextEncoder().encode(t),Gf=t=>new TextDecoder().decode(t);class Yf{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Jf{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ia(this,e)}}class Xf{constructor(e){this.decoders=e}or(e){return Ia(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ia=(t,e)=>new Xf({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Qf{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new Yf(e,r,i),this.decoder=new Jf(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const $i=({name:t,prefix:e,encode:r,decode:i})=>new Qf(t,e,r,i),ri=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=Hf(r,e);return $i({prefix:t,name:e,encode:i,decode:s=>Wf(n(s))})},Zf=(t,e,r,i)=>{const n={};for(let f=0;f<e.length;++f)n[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let c=0,h=0,l=0;for(let f=0;f<s;++f){const w=n[t[f]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);h=h<<r|w,c+=r,c>=8&&(c-=8,a[l++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return a},ed=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",a=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],a+=8;a>r;)a-=r,s+=e[n&c>>a];if(a&&(s+=e[n&c<<r-a]),i)for(;s.length*r&7;)s+="=";return s},it=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>$i({prefix:e,name:t,encode(n){return ed(n,i,r)},decode(n){return Zf(n,i,r,t)}}),td=$i({prefix:"\0",name:"identity",encode:t=>Gf(t),decode:t=>kf(t)});var rd=Object.freeze({__proto__:null,identity:td});const id=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var nd=Object.freeze({__proto__:null,base2:id});const sd=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var od=Object.freeze({__proto__:null,base8:sd});const ad=ri({prefix:"9",name:"base10",alphabet:"0123456789"});var cd=Object.freeze({__proto__:null,base10:ad});const ud=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ld=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hd=Object.freeze({__proto__:null,base16:ud,base16upper:ld});const fd=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dd=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pd=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gd=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yd=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_d=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bd=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wd=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),md=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var vd=Object.freeze({__proto__:null,base32:fd,base32hex:yd,base32hexpad:bd,base32hexpadupper:wd,base32hexupper:_d,base32pad:pd,base32padupper:gd,base32upper:dd,base32z:md});const Ed=ri({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Dd=ri({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Sd=Object.freeze({__proto__:null,base36:Ed,base36upper:Dd});const Od=ri({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xd=ri({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Id=Object.freeze({__proto__:null,base58btc:Od,base58flickr:xd});const Ad=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Td=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Pd=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Cd=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Nd=Object.freeze({__proto__:null,base64:Ad,base64pad:Td,base64url:Pd,base64urlpad:Cd});const Aa=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Rd=Aa.reduce((t,e,r)=>(t[r]=e,t),[]),$d=Aa.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Ld(t){return t.reduce((e,r)=>(e+=Rd[r],e),"")}function Ud(t){const e=[];for(const r of t){const i=$d[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Fd=$i({prefix:"\u{1F680}",name:"base256emoji",encode:Ld,decode:Ud});var Md=Object.freeze({__proto__:null,base256emoji:Fd});new TextEncoder;new TextDecoder;const to={...rd,...nd,...od,...cd,...hd,...vd,...Sd,...Id,...Nd,...Md};function Ta(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const ro=Ta("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Zi=Ta("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=xa(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Pa={utf8:ro,"utf-8":ro,hex:to.base16,latin1:Zi,ascii:Zi,binary:Zi,...to};function gt(t,e="utf8"){const r=Pa[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function _t(t,e="utf8"){const r=Pa[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Kn(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Ei(t){return gt(_t(qn(t),Lf),Oa)}function Ca(t){const e=_t(qf,eo),r=Bf+gt(In([e,t]),eo);return[Mf,jf,r].join(Ff)}function jd(t){return gt(t,Oa)}function Bd(t){return _t([Ei(t.header),Ei(t.payload)].join(Sa),Uf)}function qd(t){return[Ei(t.header),Ei(t.payload),jd(t.signature)].join(Sa)}function io(t=xr.randomBytes(zf)){return zn.generateKeyPairFromSeed(t)}async function zd(t,e,r,i,n=Q.fromMiliseconds(Date.now())){const s={alg:Rf,typ:$f},a=Ca(i.publicKey),c=n+r,h={iss:a,sub:t,aud:e,iat:n,exp:c},l=Bd({header:s,payload:h}),f=zn.sign(i.secretKey,l);return qd({header:s,payload:h,signature:f})}var Vn={},Li={};Object.defineProperty(Li,"__esModule",{value:!0});var at=ne,An=vt,Kd=20;function Vd(t,e,r){for(var i=1634760805,n=857760878,s=2036477234,a=1797285236,c=r[3]<<24|r[2]<<16|r[1]<<8|r[0],h=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],w=r[19]<<24|r[18]<<16|r[17]<<8|r[16],y=r[23]<<24|r[22]<<16|r[21]<<8|r[20],v=r[27]<<24|r[26]<<16|r[25]<<8|r[24],S=r[31]<<24|r[30]<<16|r[29]<<8|r[28],C=e[3]<<24|e[2]<<16|e[1]<<8|e[0],N=e[7]<<24|e[6]<<16|e[5]<<8|e[4],K=e[11]<<24|e[10]<<16|e[9]<<8|e[8],D=e[15]<<24|e[14]<<16|e[13]<<8|e[12],I=i,_=n,E=s,p=a,o=c,d=h,R=l,$=f,L=w,U=y,z=v,b=S,A=C,k=N,B=K,M=D,q=0;q<Kd;q+=2)I=I+o|0,A^=I,A=A>>>32-16|A<<16,L=L+A|0,o^=L,o=o>>>32-12|o<<12,_=_+d|0,k^=_,k=k>>>32-16|k<<16,U=U+k|0,d^=U,d=d>>>32-12|d<<12,E=E+R|0,B^=E,B=B>>>32-16|B<<16,z=z+B|0,R^=z,R=R>>>32-12|R<<12,p=p+$|0,M^=p,M=M>>>32-16|M<<16,b=b+M|0,$^=b,$=$>>>32-12|$<<12,E=E+R|0,B^=E,B=B>>>32-8|B<<8,z=z+B|0,R^=z,R=R>>>32-7|R<<7,p=p+$|0,M^=p,M=M>>>32-8|M<<8,b=b+M|0,$^=b,$=$>>>32-7|$<<7,_=_+d|0,k^=_,k=k>>>32-8|k<<8,U=U+k|0,d^=U,d=d>>>32-7|d<<7,I=I+o|0,A^=I,A=A>>>32-8|A<<8,L=L+A|0,o^=L,o=o>>>32-7|o<<7,I=I+d|0,M^=I,M=M>>>32-16|M<<16,z=z+M|0,d^=z,d=d>>>32-12|d<<12,_=_+R|0,A^=_,A=A>>>32-16|A<<16,b=b+A|0,R^=b,R=R>>>32-12|R<<12,E=E+$|0,k^=E,k=k>>>32-16|k<<16,L=L+k|0,$^=L,$=$>>>32-12|$<<12,p=p+o|0,B^=p,B=B>>>32-16|B<<16,U=U+B|0,o^=U,o=o>>>32-12|o<<12,E=E+$|0,k^=E,k=k>>>32-8|k<<8,L=L+k|0,$^=L,$=$>>>32-7|$<<7,p=p+o|0,B^=p,B=B>>>32-8|B<<8,U=U+B|0,o^=U,o=o>>>32-7|o<<7,_=_+R|0,A^=_,A=A>>>32-8|A<<8,b=b+A|0,R^=b,R=R>>>32-7|R<<7,I=I+d|0,M^=I,M=M>>>32-8|M<<8,z=z+M|0,d^=z,d=d>>>32-7|d<<7;at.writeUint32LE(I+i|0,t,0),at.writeUint32LE(_+n|0,t,4),at.writeUint32LE(E+s|0,t,8),at.writeUint32LE(p+a|0,t,12),at.writeUint32LE(o+c|0,t,16),at.writeUint32LE(d+h|0,t,20),at.writeUint32LE(R+l|0,t,24),at.writeUint32LE($+f|0,t,28),at.writeUint32LE(L+w|0,t,32),at.writeUint32LE(U+y|0,t,36),at.writeUint32LE(z+v|0,t,40),at.writeUint32LE(b+S|0,t,44),at.writeUint32LE(A+C|0,t,48),at.writeUint32LE(k+N|0,t,52),at.writeUint32LE(B+K|0,t,56),at.writeUint32LE(M+D|0,t,60)}function Na(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,a;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),a=s.length-e.length,s.set(e,a)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,a=n}for(var c=new Uint8Array(64),h=0;h<r.length;h+=64){Vd(c,s,t);for(var l=h;l<h+64&&l<r.length;l++)i[l]=r[l]^c[l-h];Wd(s,0,a)}return An.wipe(c),n===0&&An.wipe(s),i}Li.streamXOR=Na;function Hd(t,e,r,i){return i===void 0&&(i=0),An.wipe(r),Na(t,e,r,r,i)}Li.stream=Hd;function Wd(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var Ra={},Zt={};Object.defineProperty(Zt,"__esModule",{value:!0});function kd(t,e,r){return~(t-1)&e|t-1&r}Zt.select=kd;function Gd(t,e){return(t|0)-(e|0)-1>>>31&1}Zt.lessOrEqual=Gd;function $a(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}Zt.compare=$a;function Yd(t,e){return t.length===0||e.length===0?!1:$a(t,e)!==0}Zt.equal=Yd;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Zt,r=vt;t.DIGEST_LENGTH=16;var i=function(){function a(c){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=c[0]|c[1]<<8;this._r[0]=h&8191;var l=c[2]|c[3]<<8;this._r[1]=(h>>>13|l<<3)&8191;var f=c[4]|c[5]<<8;this._r[2]=(l>>>10|f<<6)&7939;var w=c[6]|c[7]<<8;this._r[3]=(f>>>7|w<<9)&8191;var y=c[8]|c[9]<<8;this._r[4]=(w>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var v=c[10]|c[11]<<8;this._r[6]=(y>>>14|v<<2)&8191;var S=c[12]|c[13]<<8;this._r[7]=(v>>>11|S<<5)&8065;var C=c[14]|c[15]<<8;this._r[8]=(S>>>8|C<<8)&8191,this._r[9]=C>>>5&127,this._pad[0]=c[16]|c[17]<<8,this._pad[1]=c[18]|c[19]<<8,this._pad[2]=c[20]|c[21]<<8,this._pad[3]=c[22]|c[23]<<8,this._pad[4]=c[24]|c[25]<<8,this._pad[5]=c[26]|c[27]<<8,this._pad[6]=c[28]|c[29]<<8,this._pad[7]=c[30]|c[31]<<8}return a.prototype._blocks=function(c,h,l){for(var f=this._fin?0:2048,w=this._h[0],y=this._h[1],v=this._h[2],S=this._h[3],C=this._h[4],N=this._h[5],K=this._h[6],D=this._h[7],I=this._h[8],_=this._h[9],E=this._r[0],p=this._r[1],o=this._r[2],d=this._r[3],R=this._r[4],$=this._r[5],L=this._r[6],U=this._r[7],z=this._r[8],b=this._r[9];l>=16;){var A=c[h+0]|c[h+1]<<8;w+=A&8191;var k=c[h+2]|c[h+3]<<8;y+=(A>>>13|k<<3)&8191;var B=c[h+4]|c[h+5]<<8;v+=(k>>>10|B<<6)&8191;var M=c[h+6]|c[h+7]<<8;S+=(B>>>7|M<<9)&8191;var q=c[h+8]|c[h+9]<<8;C+=(M>>>4|q<<12)&8191,N+=q>>>1&8191;var F=c[h+10]|c[h+11]<<8;K+=(q>>>14|F<<2)&8191;var V=c[h+12]|c[h+13]<<8;D+=(F>>>11|V<<5)&8191;var te=c[h+14]|c[h+15]<<8;I+=(V>>>8|te<<8)&8191,_+=te>>>5|f;var H=0,Z=H;Z+=w*E,Z+=y*(5*b),Z+=v*(5*z),Z+=S*(5*U),Z+=C*(5*L),H=Z>>>13,Z&=8191,Z+=N*(5*$),Z+=K*(5*R),Z+=D*(5*d),Z+=I*(5*o),Z+=_*(5*p),H+=Z>>>13,Z&=8191;var J=H;J+=w*p,J+=y*E,J+=v*(5*b),J+=S*(5*z),J+=C*(5*U),H=J>>>13,J&=8191,J+=N*(5*L),J+=K*(5*$),J+=D*(5*R),J+=I*(5*d),J+=_*(5*o),H+=J>>>13,J&=8191;var ee=H;ee+=w*o,ee+=y*p,ee+=v*E,ee+=S*(5*b),ee+=C*(5*z),H=ee>>>13,ee&=8191,ee+=N*(5*U),ee+=K*(5*L),ee+=D*(5*$),ee+=I*(5*R),ee+=_*(5*d),H+=ee>>>13,ee&=8191;var P=H;P+=w*d,P+=y*o,P+=v*p,P+=S*E,P+=C*(5*b),H=P>>>13,P&=8191,P+=N*(5*z),P+=K*(5*U),P+=D*(5*L),P+=I*(5*$),P+=_*(5*R),H+=P>>>13,P&=8191;var T=H;T+=w*R,T+=y*d,T+=v*o,T+=S*p,T+=C*E,H=T>>>13,T&=8191,T+=N*(5*b),T+=K*(5*z),T+=D*(5*U),T+=I*(5*L),T+=_*(5*$),H+=T>>>13,T&=8191;var O=H;O+=w*$,O+=y*R,O+=v*d,O+=S*o,O+=C*p,H=O>>>13,O&=8191,O+=N*E,O+=K*(5*b),O+=D*(5*z),O+=I*(5*U),O+=_*(5*L),H+=O>>>13,O&=8191;var u=H;u+=w*L,u+=y*$,u+=v*R,u+=S*d,u+=C*o,H=u>>>13,u&=8191,u+=N*p,u+=K*E,u+=D*(5*b),u+=I*(5*z),u+=_*(5*U),H+=u>>>13,u&=8191;var m=H;m+=w*U,m+=y*L,m+=v*$,m+=S*R,m+=C*d,H=m>>>13,m&=8191,m+=N*o,m+=K*p,m+=D*E,m+=I*(5*b),m+=_*(5*z),H+=m>>>13,m&=8191;var W=H;W+=w*z,W+=y*U,W+=v*L,W+=S*$,W+=C*R,H=W>>>13,W&=8191,W+=N*d,W+=K*o,W+=D*p,W+=I*E,W+=_*(5*b),H+=W>>>13,W&=8191;var Y=H;Y+=w*b,Y+=y*z,Y+=v*U,Y+=S*L,Y+=C*$,H=Y>>>13,Y&=8191,Y+=N*R,Y+=K*d,Y+=D*o,Y+=I*p,Y+=_*E,H+=Y>>>13,Y&=8191,H=(H<<2)+H|0,H=H+Z|0,Z=H&8191,H=H>>>13,J+=H,w=Z,y=J,v=ee,S=P,C=T,N=O,K=u,D=m,I=W,_=Y,h+=16,l-=16}this._h[0]=w,this._h[1]=y,this._h[2]=v,this._h[3]=S,this._h[4]=C,this._h[5]=N,this._h[6]=K,this._h[7]=D,this._h[8]=I,this._h[9]=_},a.prototype.finish=function(c,h){h===void 0&&(h=0);var l=new Uint16Array(10),f,w,y,v;if(this._leftover){for(v=this._leftover,this._buffer[v++]=1;v<16;v++)this._buffer[v]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,v=2;v<10;v++)this._h[v]+=f,f=this._h[v]>>>13,this._h[v]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,l[0]=this._h[0]+5,f=l[0]>>>13,l[0]&=8191,v=1;v<10;v++)l[v]=this._h[v]+f,f=l[v]>>>13,l[v]&=8191;for(l[9]-=1<<13,w=(f^1)-1,v=0;v<10;v++)l[v]&=w;for(w=~w,v=0;v<10;v++)this._h[v]=this._h[v]&w|l[v];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,v=1;v<8;v++)y=(this._h[v]+this._pad[v]|0)+(y>>>16)|0,this._h[v]=y&65535;return c[h+0]=this._h[0]>>>0,c[h+1]=this._h[0]>>>8,c[h+2]=this._h[1]>>>0,c[h+3]=this._h[1]>>>8,c[h+4]=this._h[2]>>>0,c[h+5]=this._h[2]>>>8,c[h+6]=this._h[3]>>>0,c[h+7]=this._h[3]>>>8,c[h+8]=this._h[4]>>>0,c[h+9]=this._h[4]>>>8,c[h+10]=this._h[5]>>>0,c[h+11]=this._h[5]>>>8,c[h+12]=this._h[6]>>>0,c[h+13]=this._h[6]>>>8,c[h+14]=this._h[7]>>>0,c[h+15]=this._h[7]>>>8,this._finished=!0,this},a.prototype.update=function(c){var h=0,l=c.length,f;if(this._leftover){f=16-this._leftover,f>l&&(f=l);for(var w=0;w<f;w++)this._buffer[this._leftover+w]=c[h+w];if(l-=f,h+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(f=l-l%16,this._blocks(c,h,f),h+=f,l-=f),l){for(var w=0;w<l;w++)this._buffer[this._leftover+w]=c[h+w];this._leftover+=l}return this},a.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var c=new Uint8Array(16);return this.finish(c),c},a.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},a}();t.Poly1305=i;function n(a,c){var h=new i(a);h.update(c);var l=h.digest();return h.clean(),l}t.oneTimeAuth=n;function s(a,c){return a.length!==t.DIGEST_LENGTH||c.length!==t.DIGEST_LENGTH?!1:e.equal(a,c)}t.equal=s})(Ra);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Li,r=Ra,i=vt,n=ne,s=Zt;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var a=new Uint8Array(16),c=function(){function h(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return h.prototype.seal=function(l,f,w,y){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var v=new Uint8Array(16);v.set(l,v.length-l.length);var S=new Uint8Array(32);e.stream(this._key,v,S,4);var C=f.length+this.tagLength,N;if(y){if(y.length!==C)throw new Error("ChaCha20Poly1305: incorrect destination length");N=y}else N=new Uint8Array(C);return e.streamXOR(this._key,v,f,N,4),this._authenticate(N.subarray(N.length-this.tagLength,N.length),S,N.subarray(0,N.length-this.tagLength),w),i.wipe(v),N},h.prototype.open=function(l,f,w,y){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var v=new Uint8Array(16);v.set(l,v.length-l.length);var S=new Uint8Array(32);e.stream(this._key,v,S,4);var C=new Uint8Array(this.tagLength);if(this._authenticate(C,S,f.subarray(0,f.length-this.tagLength),w),!s.equal(C,f.subarray(f.length-this.tagLength,f.length)))return null;var N=f.length-this.tagLength,K;if(y){if(y.length!==N)throw new Error("ChaCha20Poly1305: incorrect destination length");K=y}else K=new Uint8Array(N);return e.streamXOR(this._key,v,f.subarray(0,f.length-this.tagLength),K,4),i.wipe(v),K},h.prototype.clean=function(){return i.wipe(this._key),this},h.prototype._authenticate=function(l,f,w,y){var v=new r.Poly1305(f);y&&(v.update(y),y.length%16>0&&v.update(a.subarray(y.length%16))),v.update(w),w.length%16>0&&v.update(a.subarray(w.length%16));var S=new Uint8Array(8);y&&n.writeUint64LE(y.length,S),v.update(S),n.writeUint64LE(w.length,S),v.update(S);for(var C=v.digest(),N=0;N<C.length;N++)l[N]=C[N];v.clean(),i.wipe(C),i.wipe(S)},h}();t.ChaCha20Poly1305=c})(Vn);var La={},ii={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});function Jd(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Hn.isSerializableHash=Jd;Object.defineProperty(ii,"__esModule",{value:!0});var $t=Hn,Xd=Zt,Qd=vt,Ua=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),$t.isSerializableHash(this._inner)&&$t.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Qd.wipe(i)}return t.prototype.reset=function(){if(!$t.isSerializableHash(this._inner)||!$t.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){$t.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),$t.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!$t.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!$t.isSerializableHash(this._inner)||!$t.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!$t.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();ii.HMAC=Ua;function Zd(t,e,r){var i=new Ua(t,e);i.update(r);var n=i.digest();return i.clean(),n}ii.hmac=Zd;ii.equal=Xd.equal;Object.defineProperty(La,"__esModule",{value:!0});var no=ii,so=vt,ep=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var s=no.hmac(this._hash,i,r);this._hmac=new no.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),so.wipe(this._buffer),so.wipe(this._counter),this._bufpos=0},t}(),tp=La.HKDF=ep,Ui={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ne,r=vt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var i=function(){function c(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return c.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},c.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},c.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},c.prototype.update=function(h,l){if(l===void 0&&(l=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=h[f++],l--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(f=s(this._temp,this._state,h,f,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=h[f++],l--;return this},c.prototype.finish=function(h){if(!this._finished){var l=this._bytesHashed,f=this._bufferLength,w=l/536870912|0,y=l<<3,v=l%64<56?64:128;this._buffer[f]=128;for(var S=f+1;S<v-8;S++)this._buffer[S]=0;e.writeUint32BE(w,this._buffer,v-8),e.writeUint32BE(y,this._buffer,v-4),s(this._temp,this._state,this._buffer,0,v),this._finished=!0}for(var S=0;S<this.digestLength/4;S++)e.writeUint32BE(this._state[S],h,S*4);return this},c.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},c.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},c.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},c.prototype.cleanSavedState=function(h){r.wipe(h.state),h.buffer&&r.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},c}();t.SHA256=i;var n=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(c,h,l,f,w){for(;w>=64;){for(var y=h[0],v=h[1],S=h[2],C=h[3],N=h[4],K=h[5],D=h[6],I=h[7],_=0;_<16;_++){var E=f+_*4;c[_]=e.readUint32BE(l,E)}for(var _=16;_<64;_++){var p=c[_-2],o=(p>>>17|p<<32-17)^(p>>>19|p<<32-19)^p>>>10;p=c[_-15];var d=(p>>>7|p<<32-7)^(p>>>18|p<<32-18)^p>>>3;c[_]=(o+c[_-7]|0)+(d+c[_-16]|0)}for(var _=0;_<64;_++){var o=(((N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7))+(N&K^~N&D)|0)+(I+(n[_]+c[_]|0)|0)|0,d=((y>>>2|y<<32-2)^(y>>>13|y<<32-13)^(y>>>22|y<<32-22))+(y&v^y&S^v&S)|0;I=D,D=K,K=N,N=C+o|0,C=S,S=v,v=y,y=o+d|0}h[0]+=y,h[1]+=v,h[2]+=S,h[3]+=C,h[4]+=N,h[5]+=K,h[6]+=D,h[7]+=I,f+=64,w-=64}return f}function a(c){var h=new i;h.update(c);var l=h.digest();return h.clean(),l}t.hash=a})(Ui);var Wn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=xr,r=vt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function i(_){const E=new Float64Array(16);if(_)for(let p=0;p<_.length;p++)E[p]=_[p];return E}const n=new Uint8Array(32);n[0]=9;const s=i([56129,1]);function a(_){let E=1;for(let p=0;p<16;p++){let o=_[p]+E+65535;E=Math.floor(o/65536),_[p]=o-E*65536}_[0]+=E-1+37*(E-1)}function c(_,E,p){const o=~(p-1);for(let d=0;d<16;d++){const R=o&(_[d]^E[d]);_[d]^=R,E[d]^=R}}function h(_,E){const p=i(),o=i();for(let d=0;d<16;d++)o[d]=E[d];a(o),a(o),a(o);for(let d=0;d<2;d++){p[0]=o[0]-65517;for(let $=1;$<15;$++)p[$]=o[$]-65535-(p[$-1]>>16&1),p[$-1]&=65535;p[15]=o[15]-32767-(p[14]>>16&1);const R=p[15]>>16&1;p[14]&=65535,c(o,p,1-R)}for(let d=0;d<16;d++)_[2*d]=o[d]&255,_[2*d+1]=o[d]>>8}function l(_,E){for(let p=0;p<16;p++)_[p]=E[2*p]+(E[2*p+1]<<8);_[15]&=32767}function f(_,E,p){for(let o=0;o<16;o++)_[o]=E[o]+p[o]}function w(_,E,p){for(let o=0;o<16;o++)_[o]=E[o]-p[o]}function y(_,E,p){let o,d,R=0,$=0,L=0,U=0,z=0,b=0,A=0,k=0,B=0,M=0,q=0,F=0,V=0,te=0,H=0,Z=0,J=0,ee=0,P=0,T=0,O=0,u=0,m=0,W=0,Y=0,fe=0,be=0,pe=0,Ee=0,Ue=0,Ce=0,_e=p[0],ge=p[1],de=p[2],le=p[3],ue=p[4],ce=p[5],oe=p[6],re=p[7],he=p[8],ye=p[9],ie=p[10],we=p[11],ve=p[12],Se=p[13],Oe=p[14],De=p[15];o=E[0],R+=o*_e,$+=o*ge,L+=o*de,U+=o*le,z+=o*ue,b+=o*ce,A+=o*oe,k+=o*re,B+=o*he,M+=o*ye,q+=o*ie,F+=o*we,V+=o*ve,te+=o*Se,H+=o*Oe,Z+=o*De,o=E[1],$+=o*_e,L+=o*ge,U+=o*de,z+=o*le,b+=o*ue,A+=o*ce,k+=o*oe,B+=o*re,M+=o*he,q+=o*ye,F+=o*ie,V+=o*we,te+=o*ve,H+=o*Se,Z+=o*Oe,J+=o*De,o=E[2],L+=o*_e,U+=o*ge,z+=o*de,b+=o*le,A+=o*ue,k+=o*ce,B+=o*oe,M+=o*re,q+=o*he,F+=o*ye,V+=o*ie,te+=o*we,H+=o*ve,Z+=o*Se,J+=o*Oe,ee+=o*De,o=E[3],U+=o*_e,z+=o*ge,b+=o*de,A+=o*le,k+=o*ue,B+=o*ce,M+=o*oe,q+=o*re,F+=o*he,V+=o*ye,te+=o*ie,H+=o*we,Z+=o*ve,J+=o*Se,ee+=o*Oe,P+=o*De,o=E[4],z+=o*_e,b+=o*ge,A+=o*de,k+=o*le,B+=o*ue,M+=o*ce,q+=o*oe,F+=o*re,V+=o*he,te+=o*ye,H+=o*ie,Z+=o*we,J+=o*ve,ee+=o*Se,P+=o*Oe,T+=o*De,o=E[5],b+=o*_e,A+=o*ge,k+=o*de,B+=o*le,M+=o*ue,q+=o*ce,F+=o*oe,V+=o*re,te+=o*he,H+=o*ye,Z+=o*ie,J+=o*we,ee+=o*ve,P+=o*Se,T+=o*Oe,O+=o*De,o=E[6],A+=o*_e,k+=o*ge,B+=o*de,M+=o*le,q+=o*ue,F+=o*ce,V+=o*oe,te+=o*re,H+=o*he,Z+=o*ye,J+=o*ie,ee+=o*we,P+=o*ve,T+=o*Se,O+=o*Oe,u+=o*De,o=E[7],k+=o*_e,B+=o*ge,M+=o*de,q+=o*le,F+=o*ue,V+=o*ce,te+=o*oe,H+=o*re,Z+=o*he,J+=o*ye,ee+=o*ie,P+=o*we,T+=o*ve,O+=o*Se,u+=o*Oe,m+=o*De,o=E[8],B+=o*_e,M+=o*ge,q+=o*de,F+=o*le,V+=o*ue,te+=o*ce,H+=o*oe,Z+=o*re,J+=o*he,ee+=o*ye,P+=o*ie,T+=o*we,O+=o*ve,u+=o*Se,m+=o*Oe,W+=o*De,o=E[9],M+=o*_e,q+=o*ge,F+=o*de,V+=o*le,te+=o*ue,H+=o*ce,Z+=o*oe,J+=o*re,ee+=o*he,P+=o*ye,T+=o*ie,O+=o*we,u+=o*ve,m+=o*Se,W+=o*Oe,Y+=o*De,o=E[10],q+=o*_e,F+=o*ge,V+=o*de,te+=o*le,H+=o*ue,Z+=o*ce,J+=o*oe,ee+=o*re,P+=o*he,T+=o*ye,O+=o*ie,u+=o*we,m+=o*ve,W+=o*Se,Y+=o*Oe,fe+=o*De,o=E[11],F+=o*_e,V+=o*ge,te+=o*de,H+=o*le,Z+=o*ue,J+=o*ce,ee+=o*oe,P+=o*re,T+=o*he,O+=o*ye,u+=o*ie,m+=o*we,W+=o*ve,Y+=o*Se,fe+=o*Oe,be+=o*De,o=E[12],V+=o*_e,te+=o*ge,H+=o*de,Z+=o*le,J+=o*ue,ee+=o*ce,P+=o*oe,T+=o*re,O+=o*he,u+=o*ye,m+=o*ie,W+=o*we,Y+=o*ve,fe+=o*Se,be+=o*Oe,pe+=o*De,o=E[13],te+=o*_e,H+=o*ge,Z+=o*de,J+=o*le,ee+=o*ue,P+=o*ce,T+=o*oe,O+=o*re,u+=o*he,m+=o*ye,W+=o*ie,Y+=o*we,fe+=o*ve,be+=o*Se,pe+=o*Oe,Ee+=o*De,o=E[14],H+=o*_e,Z+=o*ge,J+=o*de,ee+=o*le,P+=o*ue,T+=o*ce,O+=o*oe,u+=o*re,m+=o*he,W+=o*ye,Y+=o*ie,fe+=o*we,be+=o*ve,pe+=o*Se,Ee+=o*Oe,Ue+=o*De,o=E[15],Z+=o*_e,J+=o*ge,ee+=o*de,P+=o*le,T+=o*ue,O+=o*ce,u+=o*oe,m+=o*re,W+=o*he,Y+=o*ye,fe+=o*ie,be+=o*we,pe+=o*ve,Ee+=o*Se,Ue+=o*Oe,Ce+=o*De,R+=38*J,$+=38*ee,L+=38*P,U+=38*T,z+=38*O,b+=38*u,A+=38*m,k+=38*W,B+=38*Y,M+=38*fe,q+=38*be,F+=38*pe,V+=38*Ee,te+=38*Ue,H+=38*Ce,d=1,o=R+d+65535,d=Math.floor(o/65536),R=o-d*65536,o=$+d+65535,d=Math.floor(o/65536),$=o-d*65536,o=L+d+65535,d=Math.floor(o/65536),L=o-d*65536,o=U+d+65535,d=Math.floor(o/65536),U=o-d*65536,o=z+d+65535,d=Math.floor(o/65536),z=o-d*65536,o=b+d+65535,d=Math.floor(o/65536),b=o-d*65536,o=A+d+65535,d=Math.floor(o/65536),A=o-d*65536,o=k+d+65535,d=Math.floor(o/65536),k=o-d*65536,o=B+d+65535,d=Math.floor(o/65536),B=o-d*65536,o=M+d+65535,d=Math.floor(o/65536),M=o-d*65536,o=q+d+65535,d=Math.floor(o/65536),q=o-d*65536,o=F+d+65535,d=Math.floor(o/65536),F=o-d*65536,o=V+d+65535,d=Math.floor(o/65536),V=o-d*65536,o=te+d+65535,d=Math.floor(o/65536),te=o-d*65536,o=H+d+65535,d=Math.floor(o/65536),H=o-d*65536,o=Z+d+65535,d=Math.floor(o/65536),Z=o-d*65536,R+=d-1+37*(d-1),d=1,o=R+d+65535,d=Math.floor(o/65536),R=o-d*65536,o=$+d+65535,d=Math.floor(o/65536),$=o-d*65536,o=L+d+65535,d=Math.floor(o/65536),L=o-d*65536,o=U+d+65535,d=Math.floor(o/65536),U=o-d*65536,o=z+d+65535,d=Math.floor(o/65536),z=o-d*65536,o=b+d+65535,d=Math.floor(o/65536),b=o-d*65536,o=A+d+65535,d=Math.floor(o/65536),A=o-d*65536,o=k+d+65535,d=Math.floor(o/65536),k=o-d*65536,o=B+d+65535,d=Math.floor(o/65536),B=o-d*65536,o=M+d+65535,d=Math.floor(o/65536),M=o-d*65536,o=q+d+65535,d=Math.floor(o/65536),q=o-d*65536,o=F+d+65535,d=Math.floor(o/65536),F=o-d*65536,o=V+d+65535,d=Math.floor(o/65536),V=o-d*65536,o=te+d+65535,d=Math.floor(o/65536),te=o-d*65536,o=H+d+65535,d=Math.floor(o/65536),H=o-d*65536,o=Z+d+65535,d=Math.floor(o/65536),Z=o-d*65536,R+=d-1+37*(d-1),_[0]=R,_[1]=$,_[2]=L,_[3]=U,_[4]=z,_[5]=b,_[6]=A,_[7]=k,_[8]=B,_[9]=M,_[10]=q,_[11]=F,_[12]=V,_[13]=te,_[14]=H,_[15]=Z}function v(_,E){y(_,E,E)}function S(_,E){const p=i();for(let o=0;o<16;o++)p[o]=E[o];for(let o=253;o>=0;o--)v(p,p),o!==2&&o!==4&&y(p,p,E);for(let o=0;o<16;o++)_[o]=p[o]}function C(_,E){const p=new Uint8Array(32),o=new Float64Array(80),d=i(),R=i(),$=i(),L=i(),U=i(),z=i();for(let B=0;B<31;B++)p[B]=_[B];p[31]=_[31]&127|64,p[0]&=248,l(o,E);for(let B=0;B<16;B++)R[B]=o[B];d[0]=L[0]=1;for(let B=254;B>=0;--B){const M=p[B>>>3]>>>(B&7)&1;c(d,R,M),c($,L,M),f(U,d,$),w(d,d,$),f($,R,L),w(R,R,L),v(L,U),v(z,d),y(d,$,d),y($,R,U),f(U,d,$),w(d,d,$),v(R,d),w($,L,z),y(d,$,s),f(d,d,L),y($,$,d),y(d,L,z),y(L,R,o),v(R,U),c(d,R,M),c($,L,M)}for(let B=0;B<16;B++)o[B+16]=d[B],o[B+32]=$[B],o[B+48]=R[B],o[B+64]=L[B];const b=o.subarray(32),A=o.subarray(16);S(b,b),y(A,A,b);const k=new Uint8Array(32);return h(k,A),k}t.scalarMult=C;function N(_){return C(_,n)}t.scalarMultBase=N;function K(_){if(_.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const E=new Uint8Array(_);return{publicKey:N(E),secretKey:E}}t.generateKeyPairFromSeed=K;function D(_){const E=(0,e.randomBytes)(32,_),p=K(E);return(0,r.wipe)(E),p}t.generateKeyPair=D;function I(_,E,p=!1){if(_.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(E.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const o=C(_,E);if(p){let d=0;for(let R=0;R<o.length;R++)d|=o[R];if(d===0)throw new Error("X25519: invalid shared key")}return o}t.sharedKey=I})(Wn);var oo=function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,s;i<n;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))},rp=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}(),ip=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),np=function(){function t(e,r,i,n){this.name=e,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return t}(),sp=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),op=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),ap=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,cp=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ao=3,up=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ap]],co=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function lp(t){return t?uo(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new op:typeof navigator<"u"?uo(navigator.userAgent):dp()}function hp(t){return t!==""&&up.reduce(function(e,r){var i=r[0],n=r[1];if(e)return e;var s=n.exec(t);return!!s&&[i,s]},!1)}function uo(t){var e=hp(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new sp;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<ao&&(n=oo(oo([],n,!0),pp(ao-n.length),!0)):n=[];var s=n.join("."),a=fp(t),c=cp.exec(t);return c&&c[1]?new np(r,s,a,c[1]):new rp(r,s,a)}function fp(t){for(var e=0,r=co.length;e<r;e++){var i=co[e],n=i[0],s=i[1],a=s.exec(t);if(a)return n}return null}function dp(){var t=typeof process<"u"&&process.version;return t?new ip(process.version.slice(1)):null}function pp(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.getLocalStorage=xe.getLocalStorageOrThrow=xe.getCrypto=xe.getCryptoOrThrow=Ma=xe.getLocation=xe.getLocationOrThrow=kn=xe.getNavigator=xe.getNavigatorOrThrow=Fa=xe.getDocument=xe.getDocumentOrThrow=xe.getFromWindowOrThrow=xe.getFromWindow=void 0;function gr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}xe.getFromWindow=gr;function Ir(t){const e=gr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}xe.getFromWindowOrThrow=Ir;function gp(){return Ir("document")}xe.getDocumentOrThrow=gp;function yp(){return gr("document")}var Fa=xe.getDocument=yp;function _p(){return Ir("navigator")}xe.getNavigatorOrThrow=_p;function bp(){return gr("navigator")}var kn=xe.getNavigator=bp;function wp(){return Ir("location")}xe.getLocationOrThrow=wp;function mp(){return gr("location")}var Ma=xe.getLocation=mp;function vp(){return Ir("crypto")}xe.getCryptoOrThrow=vp;function Ep(){return gr("crypto")}xe.getCrypto=Ep;function Dp(){return Ir("localStorage")}xe.getLocalStorageOrThrow=Dp;function Sp(){return gr("localStorage")}xe.getLocalStorage=Sp;var Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});var ja=Gn.getWindowMetadata=void 0;const lo=xe;function Op(){let t,e;try{t=lo.getDocumentOrThrow(),e=lo.getLocationOrThrow()}catch{return null}function r(){const w=t.getElementsByTagName("link"),y=[];for(let v=0;v<w.length;v++){const S=w[v],C=S.getAttribute("rel");if(C&&C.toLowerCase().indexOf("icon")>-1){const N=S.getAttribute("href");if(N)if(N.toLowerCase().indexOf("https:")===-1&&N.toLowerCase().indexOf("http:")===-1&&N.indexOf("//")!==0){let K=e.protocol+"//"+e.host;if(N.indexOf("/")===0)K+=N;else{const D=e.pathname.split("/");D.pop();const I=D.join("/");K+=I+"/"+N}y.push(K)}else if(N.indexOf("//")===0){const K=e.protocol+N;y.push(K)}else y.push(N)}}return y}function i(...w){const y=t.getElementsByTagName("meta");for(let v=0;v<y.length;v++){const S=y[v],C=["itemprop","property","name"].map(N=>S.getAttribute(N)).filter(N=>N?w.includes(N):!1);if(C.length&&C){const N=S.getAttribute("content");if(N)return N}}return""}function n(){let w=i("name","og:site_name","og:title","twitter:title");return w||(w=t.title),w}function s(){return i("description","og:description","twitter:description","keywords")}const a=n(),c=s(),h=e.origin,l=r();return{description:c,url:h,icons:l,name:a}}ja=Gn.getWindowMetadata=Op;var Qr={},xp=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Ba="%[a-f0-9]{2}",ho=new RegExp("("+Ba+")|([^%]+?)","gi"),fo=new RegExp("("+Ba+")+","gi");function Tn(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],Tn(r),Tn(i))}function Ip(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(ho)||[],r=1;r<e.length;r++)t=Tn(e,r).join(""),e=t.match(ho)||[];return t}}function Ap(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=fo.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var i=Ip(r[0]);i!==r[0]&&(e[r[0]]=i)}r=fo.exec(t)}e["%C2"]="\uFFFD";for(var n=Object.keys(e),s=0;s<n.length;s++){var a=n[s];t=t.replace(new RegExp(a,"g"),e[a])}return t}var Tp=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Ap(t)}},Pp=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Cp=function(t,e){for(var r={},i=Object.keys(t),n=Array.isArray(e),s=0;s<i.length;s++){var a=i[s],c=t[a];(n?e.indexOf(a)!==-1:e(a,c,t))&&(r[a]=c)}return r};(function(t){const e=xp,r=Tp,i=Pp,n=Cp,s=D=>D==null,a=Symbol("encodeFragmentIdentifier");function c(D){switch(D.arrayFormat){case"index":return I=>(_,E)=>{const p=_.length;return E===void 0||D.skipNull&&E===null||D.skipEmptyString&&E===""?_:E===null?[..._,[f(I,D),"[",p,"]"].join("")]:[..._,[f(I,D),"[",f(p,D),"]=",f(E,D)].join("")]};case"bracket":return I=>(_,E)=>E===void 0||D.skipNull&&E===null||D.skipEmptyString&&E===""?_:E===null?[..._,[f(I,D),"[]"].join("")]:[..._,[f(I,D),"[]=",f(E,D)].join("")];case"colon-list-separator":return I=>(_,E)=>E===void 0||D.skipNull&&E===null||D.skipEmptyString&&E===""?_:E===null?[..._,[f(I,D),":list="].join("")]:[..._,[f(I,D),":list=",f(E,D)].join("")];case"comma":case"separator":case"bracket-separator":{const I=D.arrayFormat==="bracket-separator"?"[]=":"=";return _=>(E,p)=>p===void 0||D.skipNull&&p===null||D.skipEmptyString&&p===""?E:(p=p===null?"":p,E.length===0?[[f(_,D),I,f(p,D)].join("")]:[[E,f(p,D)].join(D.arrayFormatSeparator)])}default:return I=>(_,E)=>E===void 0||D.skipNull&&E===null||D.skipEmptyString&&E===""?_:E===null?[..._,f(I,D)]:[..._,[f(I,D),"=",f(E,D)].join("")]}}function h(D){let I;switch(D.arrayFormat){case"index":return(_,E,p)=>{if(I=/\[(\d*)\]$/.exec(_),_=_.replace(/\[\d*\]$/,""),!I){p[_]=E;return}p[_]===void 0&&(p[_]={}),p[_][I[1]]=E};case"bracket":return(_,E,p)=>{if(I=/(\[\])$/.exec(_),_=_.replace(/\[\]$/,""),!I){p[_]=E;return}if(p[_]===void 0){p[_]=[E];return}p[_]=[].concat(p[_],E)};case"colon-list-separator":return(_,E,p)=>{if(I=/(:list)$/.exec(_),_=_.replace(/:list$/,""),!I){p[_]=E;return}if(p[_]===void 0){p[_]=[E];return}p[_]=[].concat(p[_],E)};case"comma":case"separator":return(_,E,p)=>{const o=typeof E=="string"&&E.includes(D.arrayFormatSeparator),d=typeof E=="string"&&!o&&w(E,D).includes(D.arrayFormatSeparator);E=d?w(E,D):E;const R=o||d?E.split(D.arrayFormatSeparator).map($=>w($,D)):E===null?E:w(E,D);p[_]=R};case"bracket-separator":return(_,E,p)=>{const o=/(\[\])$/.test(_);if(_=_.replace(/\[\]$/,""),!o){p[_]=E&&w(E,D);return}const d=E===null?[]:E.split(D.arrayFormatSeparator).map(R=>w(R,D));if(p[_]===void 0){p[_]=d;return}p[_]=[].concat(p[_],d)};default:return(_,E,p)=>{if(p[_]===void 0){p[_]=E;return}p[_]=[].concat(p[_],E)}}}function l(D){if(typeof D!="string"||D.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(D,I){return I.encode?I.strict?e(D):encodeURIComponent(D):D}function w(D,I){return I.decode?r(D):D}function y(D){return Array.isArray(D)?D.sort():typeof D=="object"?y(Object.keys(D)).sort((I,_)=>Number(I)-Number(_)).map(I=>D[I]):D}function v(D){const I=D.indexOf("#");return I!==-1&&(D=D.slice(0,I)),D}function S(D){let I="";const _=D.indexOf("#");return _!==-1&&(I=D.slice(_)),I}function C(D){D=v(D);const I=D.indexOf("?");return I===-1?"":D.slice(I+1)}function N(D,I){return I.parseNumbers&&!Number.isNaN(Number(D))&&typeof D=="string"&&D.trim()!==""?D=Number(D):I.parseBooleans&&D!==null&&(D.toLowerCase()==="true"||D.toLowerCase()==="false")&&(D=D.toLowerCase()==="true"),D}function K(D,I){I=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},I),l(I.arrayFormatSeparator);const _=h(I),E=Object.create(null);if(typeof D!="string"||(D=D.trim().replace(/^[?#&]/,""),!D))return E;for(const p of D.split("&")){if(p==="")continue;let[o,d]=i(I.decode?p.replace(/\+/g," "):p,"=");d=d===void 0?null:["comma","separator","bracket-separator"].includes(I.arrayFormat)?d:w(d,I),_(w(o,I),d,E)}for(const p of Object.keys(E)){const o=E[p];if(typeof o=="object"&&o!==null)for(const d of Object.keys(o))o[d]=N(o[d],I);else E[p]=N(o,I)}return I.sort===!1?E:(I.sort===!0?Object.keys(E).sort():Object.keys(E).sort(I.sort)).reduce((p,o)=>{const d=E[o];return Boolean(d)&&typeof d=="object"&&!Array.isArray(d)?p[o]=y(d):p[o]=d,p},Object.create(null))}t.extract=C,t.parse=K,t.stringify=(D,I)=>{if(!D)return"";I=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},I),l(I.arrayFormatSeparator);const _=d=>I.skipNull&&s(D[d])||I.skipEmptyString&&D[d]==="",E=c(I),p={};for(const d of Object.keys(D))_(d)||(p[d]=D[d]);const o=Object.keys(p);return I.sort!==!1&&o.sort(I.sort),o.map(d=>{const R=D[d];return R===void 0?"":R===null?f(d,I):Array.isArray(R)?R.length===0&&I.arrayFormat==="bracket-separator"?f(d,I)+"[]":R.reduce(E(d),[]).join("&"):f(d,I)+"="+f(R,I)}).filter(d=>d.length>0).join("&")},t.parseUrl=(D,I)=>{I=Object.assign({decode:!0},I);const[_,E]=i(D,"#");return Object.assign({url:_.split("?")[0]||"",query:K(C(D),I)},I&&I.parseFragmentIdentifier&&E?{fragmentIdentifier:w(E,I)}:{})},t.stringifyUrl=(D,I)=>{I=Object.assign({encode:!0,strict:!0,[a]:!0},I);const _=v(D.url).split("?")[0]||"",E=t.extract(D.url),p=t.parse(E,{sort:!1}),o=Object.assign(p,D.query);let d=t.stringify(o,I);d&&(d=`?${d}`);let R=S(D.url);return D.fragmentIdentifier&&(R=`#${I[a]?f(D.fragmentIdentifier,I):D.fragmentIdentifier}`),`${_}${d}${R}`},t.pick=(D,I,_)=>{_=Object.assign({parseFragmentIdentifier:!0,[a]:!1},_);const{url:E,query:p,fragmentIdentifier:o}=t.parseUrl(D,_);return t.stringifyUrl({url:E,query:n(p,I),fragmentIdentifier:o},_)},t.exclude=(D,I,_)=>{const E=Array.isArray(I)?p=>!I.includes(p):(p,o)=>!I(p,o);return t.pick(D,E,_)}})(Qr);const Np={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function qa(t,e){return t.includes(":")?[t]:e.chains||[]}const za="base10",pt="base16",Pn="base64pad",Yn="utf8",Ka=0,yr=1,Rp=0,po=1,Cn=12,Jn=32;function $p(){const t=Wn.generateKeyPair();return{privateKey:gt(t.secretKey,pt),publicKey:gt(t.publicKey,pt)}}function Nn(){const t=xr.randomBytes(Jn);return gt(t,pt)}function Lp(t,e){const r=Wn.sharedKey(_t(t,pt),_t(e,pt)),i=new tp(Ui.SHA256,r).expand(Jn);return gt(i,pt)}function Up(t){const e=Ui.hash(_t(t,pt));return gt(e,pt)}function Dr(t){const e=Ui.hash(_t(t,Yn));return gt(e,pt)}function Fp(t){return _t(`${t}`,za)}function ni(t){return Number(gt(t,za))}function Mp(t){const e=Fp(typeof t.type<"u"?t.type:Ka);if(ni(e)===yr&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?_t(t.senderPublicKey,pt):void 0,i=typeof t.iv<"u"?_t(t.iv,pt):xr.randomBytes(Cn),n=new Vn.ChaCha20Poly1305(_t(t.symKey,pt)).seal(i,_t(t.message,Yn));return Bp({type:e,sealed:n,iv:i,senderPublicKey:r})}function jp(t){const e=new Vn.ChaCha20Poly1305(_t(t.symKey,pt)),{sealed:r,iv:i}=Di(t.encoded),n=e.open(i,r);if(n===null)throw new Error("Failed to decrypt");return gt(n,Yn)}function Bp(t){if(ni(t.type)===yr){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return gt(In([t.type,t.senderPublicKey,t.iv,t.sealed]),Pn)}return gt(In([t.type,t.iv,t.sealed]),Pn)}function Di(t){const e=_t(t,Pn),r=e.slice(Rp,po),i=po;if(ni(r)===yr){const c=i+Jn,h=c+Cn,l=e.slice(i,c),f=e.slice(c,h),w=e.slice(h);return{type:r,sealed:w,iv:f,senderPublicKey:l}}const n=i+Cn,s=e.slice(i,n),a=e.slice(n);return{type:r,sealed:a,iv:s}}function qp(t,e){const r=Di(t);return Va({type:ni(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?gt(r.senderPublicKey,pt):void 0,receiverPublicKey:e?.receiverPublicKey})}function Va(t){const e=t?.type||Ka;if(e===yr){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function go(t){return t.type===yr&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var zp=Object.defineProperty,yo=Object.getOwnPropertySymbols,Kp=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,_o=(t,e,r)=>e in t?zp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bo=(t,e)=>{for(var r in e||(e={}))Kp.call(e,r)&&_o(t,r,e[r]);if(yo)for(var r of yo(e))Vp.call(e,r)&&_o(t,r,e[r]);return t};const Hp="ReactNative",Gt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Wp="js";function Xn(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ha(){return!Fa()&&!!kn()&&navigator.product===Hp}function Qn(){return!Xn()&&!!kn()}function Zn(){return Ha()?Gt.reactNative:Xn()?Gt.node:Qn()?Gt.browser:Gt.unknown}function kp(t,e){let r=Qr.parse(t);return r=bo(bo({},r),e),t=Qr.stringify(r),t}function Gp(){return ja()||{name:"",description:"",url:"",icons:[""]}}function Yp(){if(Zn()===Gt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const t=lp();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Jp(){var t;const e=Zn();return e===Gt.browser?[e,((t=Ma())==null?void 0:t.host)||"unknown"].join(":"):e}function Xp(t,e,r){const i=Yp(),n=Jp();return[[t,e].join("-"),[Wp,r].join("-"),i,n].join("/")}function Qp({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:n,projectId:s,useOnCloseEvent:a}){const c=r.split("?"),h=Xp(t,e,i),l={auth:n,ua:h,projectId:s,useOnCloseEvent:a||void 0},f=kp(c[1]||"",l);return c[0]+"?"+f}function fr(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Wa(t){return Object.fromEntries(t.entries())}function ka(t){return new Map(Object.entries(t))}function vr(t=Q.FIVE_MINUTES,e){const r=Q.toMiliseconds(t||Q.FIVE_MINUTES);let i,n,s;return{resolve:a=>{s&&i&&(clearTimeout(s),i(a))},reject:a=>{s&&n&&(clearTimeout(s),n(a))},done:()=>new Promise((a,c)=>{s=setTimeout(()=>{c(new Error(e))},r),i=a,n=c})}}function Si(t,e,r){return new Promise(async(i,n)=>{const s=setTimeout(()=>n(new Error(r)),e);try{const a=await t;i(a)}catch(a){n(a)}clearTimeout(s)})}function Ga(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Zp(t){return Ga("topic",t)}function eg(t){return Ga("id",t)}function Ya(t){const[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function At(t,e){return Q.fromMiliseconds((e||Date.now())+Q.toMiliseconds(t))}function kt(t){return Date.now()>=Q.toMiliseconds(t)}function ze(t,e){return`${t}${e?`:${e}`:""}`}async function tg({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;let n=(typeof r=="string"?JSON.parse(r):r)?.href;if(typeof n!="string")return;n.endsWith("/")&&(n=n.slice(0,-1));const s=`${n}/wc?requestId=${t}&sessionTopic=${e}`,a=Zn();a===Gt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):a===Gt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(i){console.error(i)}}const rg="irn";function Rn(t){return t?.relay||{protocol:rg}}function bi(t){const e=Np[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var ig=Object.defineProperty,wo=Object.getOwnPropertySymbols,ng=Object.prototype.hasOwnProperty,sg=Object.prototype.propertyIsEnumerable,mo=(t,e,r)=>e in t?ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,og=(t,e)=>{for(var r in e||(e={}))ng.call(e,r)&&mo(t,r,e[r]);if(wo)for(var r of wo(e))sg.call(e,r)&&mo(t,r,e[r]);return t};function ag(t,e="-"){const r={},i="relay"+e;return Object.keys(t).forEach(n=>{if(n.startsWith(i)){const s=n.replace(i,""),a=t[n];r[s]=a}}),r}function cg(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",a=Qr.parse(s);return{protocol:i,topic:ug(n[0]),version:parseInt(n[1],10),symKey:a.symKey,relay:ag(a)}}function ug(t){return t.startsWith("//")?t.substring(2):t}function lg(t,e="-"){const r="relay",i={};return Object.keys(t).forEach(n=>{const s=r+e+n;t[n]&&(i[s]=t[n])}),i}function hg(t){return`${t.protocol}:${t.topic}@${t.version}?`+Qr.stringify(og({symKey:t.symKey},lg(t.relay)))}function Ar(t){const e=[];return t.forEach(r=>{const[i,n]=r.split(":");e.push(`${i}:${n}`)}),e}function fg(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Ar(r.accounts))}),e}function dg(t,e){const r=[];return Object.values(t).forEach(i=>{Ar(i.accounts).includes(e)&&r.push(...i.methods)}),r}function pg(t,e){const r=[];return Object.values(t).forEach(i=>{Ar(i.accounts).includes(e)&&r.push(...i.events)}),r}function gg(t,e){const r=wi(t,e);if(r)throw new Error(r.message);const i={};for(const[n,s]of Object.entries(t))i[n]={methods:s.methods,events:s.events,chains:s.accounts.map(a=>`${a.split(":")[0]}:${a.split(":")[1]}`)};return i}const yg={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},_g={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function G(t,e){const{message:r,code:i}=_g[t];return{message:e?`${r} ${e}`:r,code:i}}function et(t,e){const{message:r,code:i}=yg[t];return{message:e?`${r} ${e}`:r,code:i}}function si(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Wr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function dt(t){return typeof t>"u"}function tt(t,e){return e&&dt(t)?!0:typeof t=="string"&&!!t.trim().length}function es(t,e){return e&&dt(t)?!0:typeof t=="number"&&!isNaN(t)}function bg(t,e){const{requiredNamespaces:r}=e,i=Object.keys(t.namespaces),n=Object.keys(r);let s=!0;return fr(n,i)?(i.forEach(a=>{const{accounts:c,methods:h,events:l}=t.namespaces[a],f=Ar(c),w=r[a];(!fr(qa(a,w),f)||!fr(w.methods,h)||!fr(w.events,l))&&(s=!1)}),s):!1}function Oi(t){return tt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function wg(t){if(tt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Oi(r)}}return!1}function mg(t){if(tt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function vg(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Eg(t){return t?.topic}function Dg(t,e){let r=null;return tt(t?.publicKey,!1)||(r=G("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function vo(t){let e=!0;return si(t)?t.length&&(e=t.every(r=>tt(r,!1))):e=!1,e}function Sg(t,e,r){let i=null;return si(e)&&e.length?e.forEach(n=>{i||Oi(n)||(i=et("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):Oi(t)||(i=et("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function Og(t,e,r){let i=null;return Object.entries(t).forEach(([n,s])=>{if(i)return;const a=Sg(n,qa(n,s),`${e} ${r}`);a&&(i=a)}),i}function xg(t,e){let r=null;return si(t)?t.forEach(i=>{r||wg(i)||(r=et("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=et("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Ig(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=xg(i?.accounts,`${e} namespace`);n&&(r=n)}),r}function Ag(t,e){let r=null;return vo(t?.methods)?vo(t?.events)||(r=et("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=et("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Ja(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=Ag(i,`${e}, namespace`);n&&(r=n)}),r}function Tg(t,e,r){let i=null;if(t&&Wr(t)){const n=Ja(t,e);n&&(i=n);const s=Og(t,e,r);s&&(i=s)}else i=G("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return i}function wi(t,e){let r=null;if(t&&Wr(t)){const i=Ja(t,e);i&&(r=i);const n=Ig(t,e);n&&(r=n)}else r=G("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Xa(t){return tt(t.protocol,!0)}function Pg(t,e){let r=!1;return e&&!t?r=!0:t&&si(t)&&t.length&&t.forEach(i=>{r=Xa(i)}),r}function Cg(t){return typeof t=="number"}function yt(t){return typeof t<"u"&&typeof t!==null}function Ng(t){return!(!t||typeof t!="object"||!t.code||!es(t.code,!1)||!t.message||!tt(t.message,!1))}function Rg(t){return!(dt(t)||!tt(t.method,!1))}function $g(t){return!(dt(t)||dt(t.result)&&dt(t.error)||!es(t.id,!1)||!tt(t.jsonrpc,!1))}function Lg(t){return!(dt(t)||!tt(t.name,!1))}function Eo(t,e){return!(!Oi(e)||!fg(t).includes(e))}function Ug(t,e,r){return tt(r,!1)?dg(t,e).includes(r):!1}function Fg(t,e,r){return tt(r,!1)?pg(t,e).includes(r):!1}function Do(t,e,r){let i=null;const n=Mg(t),s=jg(e),a=Object.keys(n),c=Object.keys(s),h=So(Object.keys(t)),l=So(Object.keys(e)),f=h.filter(w=>!l.includes(w));return f.length&&(i=G("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),fr(a,c)||(i=G("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${c.toString()}`)),Object.keys(e).forEach(w=>{if(!w.includes(":")||i)return;const y=Ar(e[w].accounts);y.includes(w)||(i=G("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${w}
        Required: ${w}
        Approved: ${y.toString()}`))}),a.forEach(w=>{i||(fr(n[w].methods,s[w].methods)?fr(n[w].events,s[w].events)||(i=G("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${w}`)):i=G("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${w}`))}),i}function Mg(t){const e={};return Object.keys(t).forEach(r=>{var i;r.includes(":")?e[r]=t[r]:(i=t[r].chains)==null||i.forEach(n=>{e[n]={methods:t[r].methods,events:t[r].events}})}),e}function So(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function jg(t){const e={};return Object.keys(t).forEach(r=>{r.includes(":")?e[r]=t[r]:Ar(t[r].accounts)?.forEach(n=>{e[n]={accounts:t[r].accounts.filter(s=>s.includes(`${n}:`)),methods:t[r].methods,events:t[r].events}})}),e}function Bg(t,e){return es(t,!1)&&t<=e.max&&t>=e.min}const qg="PARSE_ERROR",zg="INVALID_REQUEST",Kg="METHOD_NOT_FOUND",Vg="INVALID_PARAMS",Qa="INTERNAL_ERROR",ts="SERVER_ERROR",Hg=[-32700,-32600,-32601,-32602,-32603],kr={[qg]:{code:-32700,message:"Parse error"},[zg]:{code:-32600,message:"Invalid Request"},[Kg]:{code:-32601,message:"Method not found"},[Vg]:{code:-32602,message:"Invalid params"},[Qa]:{code:-32603,message:"Internal error"},[ts]:{code:-32e3,message:"Server error"}},Za=ts;function Wg(t){return Hg.includes(t)}function Oo(t){return Object.keys(kr).includes(t)?kr[t]:kr[Za]}function kg(t){const e=Object.values(kr).find(r=>r.code===t);return e||kr[Za]}function Gg(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var ec={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $n=function(t,e){return $n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},$n(t,e)};function Yg(t,e){$n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ln=function(){return Ln=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ln.apply(this,arguments)};function Jg(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Xg(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Qg(t,e){return function(r,i){e(r,i,t)}}function Zg(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ey(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(f){try{l(i.next(f))}catch(w){a(w)}}function h(f){try{l(i.throw(f))}catch(w){a(w)}}function l(f){f.done?s(f.value):n(f.value).then(c,h)}l((i=i.apply(t,e||[])).next())})}function ty(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,n,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(l){return function(f){return h([l,f])}}function h(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=l[0]&2?n.return:l[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,l[1])).done)return s;switch(n=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,n=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(f){l=[6,f],n=0}finally{i=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ry(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function iy(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Un(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return s}function ny(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(tc(arguments[e]));return t}function sy(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),n=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}function Zr(t){return this instanceof Zr?(this.v=t,this):new Zr(t)}function oy(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(y){i[y]&&(n[y]=function(v){return new Promise(function(S,C){s.push([y,v,S,C])>1||c(y,v)})})}function c(y,v){try{h(i[y](v))}catch(S){w(s[0][3],S)}}function h(y){y.value instanceof Zr?Promise.resolve(y.value.v).then(l,f):w(s[0][2],y)}function l(y){c("next",y)}function f(y){c("throw",y)}function w(y,v){y(v),s.shift(),s.length&&c(s[0][0],s[0][1])}}function ay(t){var e,r;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=t[n]?function(a){return(r=!r)?{value:Zr(t[n](a)),done:n==="return"}:s?s(a):a}:s}}function cy(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Un=="function"?Un(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(a){return new Promise(function(c,h){a=t[s](a),n(c,h,a.done,a.value)})}}function n(s,a,c,h){Promise.resolve(h).then(function(l){s({value:l,done:c})},a)}}function uy(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ly(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function hy(t){return t&&t.__esModule?t:{default:t}}function fy(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function dy(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var py=Object.freeze({__proto__:null,get __assign(){return Ln},__asyncDelegator:ay,__asyncGenerator:oy,__asyncValues:cy,__await:Zr,__awaiter:ey,__classPrivateFieldGet:fy,__classPrivateFieldSet:dy,__createBinding:ry,__decorate:Xg,__exportStar:iy,__extends:Yg,__generator:ty,__importDefault:hy,__importStar:ly,__makeTemplateObject:uy,__metadata:Zg,__param:Qg,__read:tc,__rest:Jg,__spread:ny,__spreadArrays:sy,__values:Un}),gy=Qt(py),jt={},xo;function yy(){if(xo)return jt;xo=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.isBrowserCryptoAvailable=jt.getSubtleCrypto=jt.getBrowerCrypto=void 0;function t(){return mt?.crypto||mt?.msCrypto||{}}jt.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}jt.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return jt.isBrowserCryptoAvailable=r,jt}var Bt={},Io;function _y(){if(Io)return Bt;Io=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.isBrowser=Bt.isNode=Bt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Bt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Bt.isNode=e;function r(){return!t()&&!e()}return Bt.isBrowser=r,Bt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=gy;e.__exportStar(yy(),t),e.__exportStar(_y(),t)})(ec);function rc(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function rs(t=6){return BigInt(rc(t))}function Fi(t,e,r){return{id:r||rc(),jsonrpc:"2.0",method:t,params:e}}function is(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ns(t,e,r){return{id:t,jsonrpc:"2.0",error:by(e,r)}}function by(t,e){return typeof t>"u"?Oo(Qa):(typeof t=="string"&&(t=Object.assign(Object.assign({},Oo(ts)),{message:t})),typeof e<"u"&&(t.data=e),Wg(t.code)&&(t=kg(t.code)),t)}class wy{}class my extends wy{constructor(){super()}}class vy extends my{constructor(e){super()}}const Ey="^wss?:";function Dy(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Sy(t,e){const r=Dy(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Ao(t){return Sy(t,Ey)}function Oy(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ic(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ss(t){return ic(t)&&"method"in t}function Mi(t){return ic(t)&&(qt(t)||Tt(t))}function qt(t){return"result"in t}function Tt(t){return"error"in t}class xy extends vy{constructor(e){super(e),this.events=new ae,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Fi(e.method,e.params||[],e.id||rs().toString()),r)}async requestStrict(e,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(s){n(s)}this.events.on(`${e.id}`,s=>{Tt(s)?n(s.error):i(s.result)});try{await this.connection.send(e,r)}catch(s){n(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Mi(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Iy=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Ay=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",To=t=>t.split("?")[0],Po=10,Ty=Iy();class Py{constructor(e){if(this.url=e,this.events=new ae,this.registering=!1,!Ao(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(qn(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!Ao(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),n(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{const n=ec.isReactNative()?void 0:{rejectUnauthorized:!Oy(e)},s=new Ty(e,[],n);Ay()?s.onerror=a=>{const c=a;i(this.emitError(c.error))}:s.on("error",a=>{i(this.emitError(a))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ya(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),s=ns(e,n);this.events.emit("payload",s)}parseError(e,r=this.url){return Gg(e,To(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Po&&this.events.setMaxListeners(Po)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${To(this.url)}`));return this.events.emit("register_error",r),r}}var xi={exports:{}};xi.exports;(function(t,e){var r=200,i="__lodash_hash_undefined__",n=1,s=2,a=9007199254740991,c="[object Arguments]",h="[object Array]",l="[object AsyncFunction]",f="[object Boolean]",w="[object Date]",y="[object Error]",v="[object Function]",S="[object GeneratorFunction]",C="[object Map]",N="[object Number]",K="[object Null]",D="[object Object]",I="[object Promise]",_="[object Proxy]",E="[object RegExp]",p="[object Set]",o="[object String]",d="[object Symbol]",R="[object Undefined]",$="[object WeakMap]",L="[object ArrayBuffer]",U="[object DataView]",z="[object Float32Array]",b="[object Float64Array]",A="[object Int8Array]",k="[object Int16Array]",B="[object Int32Array]",M="[object Uint8Array]",q="[object Uint8ClampedArray]",F="[object Uint16Array]",V="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,Z=/^(?:0|[1-9]\d*)$/,J={};J[z]=J[b]=J[A]=J[k]=J[B]=J[M]=J[q]=J[F]=J[V]=!0,J[c]=J[h]=J[L]=J[f]=J[U]=J[w]=J[y]=J[v]=J[C]=J[N]=J[D]=J[E]=J[p]=J[o]=J[$]=!1;var ee=typeof mt=="object"&&mt&&mt.Object===Object&&mt,P=typeof self=="object"&&self&&self.Object===Object&&self,T=ee||P||Function("return this")(),O=e&&!e.nodeType&&e,u=O&&!0&&t&&!t.nodeType&&t,m=u&&u.exports===O,W=m&&ee.process,Y=function(){try{return W&&W.binding&&W.binding("util")}catch{}}(),fe=Y&&Y.isTypedArray;function be(g,x){for(var j=-1,X=g==null?0:g.length,Ie=0,se=[];++j<X;){var $e=g[j];x($e,j,g)&&(se[Ie++]=$e)}return se}function pe(g,x){for(var j=-1,X=x.length,Ie=g.length;++j<X;)g[Ie+j]=x[j];return g}function Ee(g,x){for(var j=-1,X=g==null?0:g.length;++j<X;)if(x(g[j],j,g))return!0;return!1}function Ue(g,x){for(var j=-1,X=Array(g);++j<g;)X[j]=x(j);return X}function Ce(g){return function(x){return g(x)}}function _e(g,x){return g.has(x)}function ge(g,x){return g?.[x]}function de(g){var x=-1,j=Array(g.size);return g.forEach(function(X,Ie){j[++x]=[Ie,X]}),j}function le(g,x){return function(j){return g(x(j))}}function ue(g){var x=-1,j=Array(g.size);return g.forEach(function(X){j[++x]=X}),j}var ce=Array.prototype,oe=Function.prototype,re=Object.prototype,he=T["__core-js_shared__"],ye=oe.toString,ie=re.hasOwnProperty,we=function(){var g=/[^.]+$/.exec(he&&he.keys&&he.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),ve=re.toString,Se=RegExp("^"+ye.call(ie).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=m?T.Buffer:void 0,De=T.Symbol,xt=T.Uint8Array,Ct=re.propertyIsEnumerable,zt=ce.splice,bt=De?De.toStringTag:void 0,er=Object.getOwnPropertySymbols,Tr=Oe?Oe.isBuffer:void 0,ai=le(Object.keys,Object),Fe=_r(T,"DataView"),Ne=_r(T,"Map"),Me=_r(T,"Promise"),je=_r(T,"Set"),Be=_r(T,"WeakMap"),Re=_r(Object,"create"),Ve=rr(Fe),He=rr(Ne),We=rr(Me),ke=rr(je),Ge=rr(Be),Ke=De?De.prototype:void 0,qe=Ke?Ke.valueOf:void 0;function Ae(g){var x=-1,j=g==null?0:g.length;for(this.clear();++x<j;){var X=g[x];this.set(X[0],X[1])}}function Ye(){this.__data__=Re?Re(null):{},this.size=0}function Je(g){var x=this.has(g)&&delete this.__data__[g];return this.size-=x?1:0,x}function Dc(g){var x=this.__data__;if(Re){var j=x[g];return j===i?void 0:j}return ie.call(x,g)?x[g]:void 0}function Sc(g){var x=this.__data__;return Re?x[g]!==void 0:ie.call(x,g)}function Oc(g,x){var j=this.__data__;return this.size+=this.has(g)?0:1,j[g]=Re&&x===void 0?i:x,this}Ae.prototype.clear=Ye,Ae.prototype.delete=Je,Ae.prototype.get=Dc,Ae.prototype.has=Sc,Ae.prototype.set=Oc;function Ft(g){var x=-1,j=g==null?0:g.length;for(this.clear();++x<j;){var X=g[x];this.set(X[0],X[1])}}function xc(){this.__data__=[],this.size=0}function Ic(g){var x=this.__data__,j=ui(x,g);if(j<0)return!1;var X=x.length-1;return j==X?x.pop():zt.call(x,j,1),--this.size,!0}function Ac(g){var x=this.__data__,j=ui(x,g);return j<0?void 0:x[j][1]}function Tc(g){return ui(this.__data__,g)>-1}function Pc(g,x){var j=this.__data__,X=ui(j,g);return X<0?(++this.size,j.push([g,x])):j[X][1]=x,this}Ft.prototype.clear=xc,Ft.prototype.delete=Ic,Ft.prototype.get=Ac,Ft.prototype.has=Tc,Ft.prototype.set=Pc;function tr(g){var x=-1,j=g==null?0:g.length;for(this.clear();++x<j;){var X=g[x];this.set(X[0],X[1])}}function Cc(){this.size=0,this.__data__={hash:new Ae,map:new(Ne||Ft),string:new Ae}}function Nc(g){var x=li(this,g).delete(g);return this.size-=x?1:0,x}function Rc(g){return li(this,g).get(g)}function $c(g){return li(this,g).has(g)}function Lc(g,x){var j=li(this,g),X=j.size;return j.set(g,x),this.size+=j.size==X?0:1,this}tr.prototype.clear=Cc,tr.prototype.delete=Nc,tr.prototype.get=Rc,tr.prototype.has=$c,tr.prototype.set=Lc;function ci(g){var x=-1,j=g==null?0:g.length;for(this.__data__=new tr;++x<j;)this.add(g[x])}function Uc(g){return this.__data__.set(g,i),this}function Fc(g){return this.__data__.has(g)}ci.prototype.add=ci.prototype.push=Uc,ci.prototype.has=Fc;function Kt(g){var x=this.__data__=new Ft(g);this.size=x.size}function Mc(){this.__data__=new Ft,this.size=0}function jc(g){var x=this.__data__,j=x.delete(g);return this.size=x.size,j}function Bc(g){return this.__data__.get(g)}function qc(g){return this.__data__.has(g)}function zc(g,x){var j=this.__data__;if(j instanceof Ft){var X=j.__data__;if(!Ne||X.length<r-1)return X.push([g,x]),this.size=++j.size,this;j=this.__data__=new tr(X)}return j.set(g,x),this.size=j.size,this}Kt.prototype.clear=Mc,Kt.prototype.delete=jc,Kt.prototype.get=Bc,Kt.prototype.has=qc,Kt.prototype.set=zc;function Kc(g,x){var j=hi(g),X=!j&&nu(g),Ie=!j&&!X&&qi(g),se=!j&&!X&&!Ie&&bs(g),$e=j||X||Ie||se,Xe=$e?Ue(g.length,String):[],rt=Xe.length;for(var Pe in g)(x||ie.call(g,Pe))&&!($e&&(Pe=="length"||Ie&&(Pe=="offset"||Pe=="parent")||se&&(Pe=="buffer"||Pe=="byteLength"||Pe=="byteOffset")||Zc(Pe,rt)))&&Xe.push(Pe);return Xe}function ui(g,x){for(var j=g.length;j--;)if(ps(g[j][0],x))return j;return-1}function Vc(g,x,j){var X=x(g);return hi(g)?X:pe(X,j(g))}function Pr(g){return g==null?g===void 0?R:K:bt&&bt in Object(g)?Xc(g):iu(g)}function ls(g){return Cr(g)&&Pr(g)==c}function hs(g,x,j,X,Ie){return g===x?!0:g==null||x==null||!Cr(g)&&!Cr(x)?g!==g&&x!==x:Hc(g,x,j,X,hs,Ie)}function Hc(g,x,j,X,Ie,se){var $e=hi(g),Xe=hi(x),rt=$e?h:Vt(g),Pe=Xe?h:Vt(x);rt=rt==c?D:rt,Pe=Pe==c?D:Pe;var wt=rt==D,It=Pe==D,st=rt==Pe;if(st&&qi(g)){if(!qi(x))return!1;$e=!0,wt=!1}if(st&&!wt)return se||(se=new Kt),$e||bs(g)?fs(g,x,j,X,Ie,se):Yc(g,x,rt,j,X,Ie,se);if(!(j&n)){var Et=wt&&ie.call(g,"__wrapped__"),Dt=It&&ie.call(x,"__wrapped__");if(Et||Dt){var Ht=Et?g.value():g,Mt=Dt?x.value():x;return se||(se=new Kt),Ie(Ht,Mt,j,X,se)}}return st?(se||(se=new Kt),Jc(g,x,j,X,Ie,se)):!1}function Wc(g){if(!_s(g)||tu(g))return!1;var x=gs(g)?Se:H;return x.test(rr(g))}function kc(g){return Cr(g)&&ys(g.length)&&!!J[Pr(g)]}function Gc(g){if(!ru(g))return ai(g);var x=[];for(var j in Object(g))ie.call(g,j)&&j!="constructor"&&x.push(j);return x}function fs(g,x,j,X,Ie,se){var $e=j&n,Xe=g.length,rt=x.length;if(Xe!=rt&&!($e&&rt>Xe))return!1;var Pe=se.get(g);if(Pe&&se.get(x))return Pe==x;var wt=-1,It=!0,st=j&s?new ci:void 0;for(se.set(g,x),se.set(x,g);++wt<Xe;){var Et=g[wt],Dt=x[wt];if(X)var Ht=$e?X(Dt,Et,wt,x,g,se):X(Et,Dt,wt,g,x,se);if(Ht!==void 0){if(Ht)continue;It=!1;break}if(st){if(!Ee(x,function(Mt,ir){if(!_e(st,ir)&&(Et===Mt||Ie(Et,Mt,j,X,se)))return st.push(ir)})){It=!1;break}}else if(!(Et===Dt||Ie(Et,Dt,j,X,se))){It=!1;break}}return se.delete(g),se.delete(x),It}function Yc(g,x,j,X,Ie,se,$e){switch(j){case U:if(g.byteLength!=x.byteLength||g.byteOffset!=x.byteOffset)return!1;g=g.buffer,x=x.buffer;case L:return!(g.byteLength!=x.byteLength||!se(new xt(g),new xt(x)));case f:case w:case N:return ps(+g,+x);case y:return g.name==x.name&&g.message==x.message;case E:case o:return g==x+"";case C:var Xe=de;case p:var rt=X&n;if(Xe||(Xe=ue),g.size!=x.size&&!rt)return!1;var Pe=$e.get(g);if(Pe)return Pe==x;X|=s,$e.set(g,x);var wt=fs(Xe(g),Xe(x),X,Ie,se,$e);return $e.delete(g),wt;case d:if(qe)return qe.call(g)==qe.call(x)}return!1}function Jc(g,x,j,X,Ie,se){var $e=j&n,Xe=ds(g),rt=Xe.length,Pe=ds(x),wt=Pe.length;if(rt!=wt&&!$e)return!1;for(var It=rt;It--;){var st=Xe[It];if(!($e?st in x:ie.call(x,st)))return!1}var Et=se.get(g);if(Et&&se.get(x))return Et==x;var Dt=!0;se.set(g,x),se.set(x,g);for(var Ht=$e;++It<rt;){st=Xe[It];var Mt=g[st],ir=x[st];if(X)var ws=$e?X(ir,Mt,st,x,g,se):X(Mt,ir,st,g,x,se);if(!(ws===void 0?Mt===ir||Ie(Mt,ir,j,X,se):ws)){Dt=!1;break}Ht||(Ht=st=="constructor")}if(Dt&&!Ht){var fi=g.constructor,di=x.constructor;fi!=di&&"constructor"in g&&"constructor"in x&&!(typeof fi=="function"&&fi instanceof fi&&typeof di=="function"&&di instanceof di)&&(Dt=!1)}return se.delete(g),se.delete(x),Dt}function ds(g){return Vc(g,au,Qc)}function li(g,x){var j=g.__data__;return eu(x)?j[typeof x=="string"?"string":"hash"]:j.map}function _r(g,x){var j=ge(g,x);return Wc(j)?j:void 0}function Xc(g){var x=ie.call(g,bt),j=g[bt];try{g[bt]=void 0;var X=!0}catch{}var Ie=ve.call(g);return X&&(x?g[bt]=j:delete g[bt]),Ie}var Qc=er?function(g){return g==null?[]:(g=Object(g),be(er(g),function(x){return Ct.call(g,x)}))}:cu,Vt=Pr;(Fe&&Vt(new Fe(new ArrayBuffer(1)))!=U||Ne&&Vt(new Ne)!=C||Me&&Vt(Me.resolve())!=I||je&&Vt(new je)!=p||Be&&Vt(new Be)!=$)&&(Vt=function(g){var x=Pr(g),j=x==D?g.constructor:void 0,X=j?rr(j):"";if(X)switch(X){case Ve:return U;case He:return C;case We:return I;case ke:return p;case Ge:return $}return x});function Zc(g,x){return x=x??a,!!x&&(typeof g=="number"||Z.test(g))&&g>-1&&g%1==0&&g<x}function eu(g){var x=typeof g;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?g!=="__proto__":g===null}function tu(g){return!!we&&we in g}function ru(g){var x=g&&g.constructor,j=typeof x=="function"&&x.prototype||re;return g===j}function iu(g){return ve.call(g)}function rr(g){if(g!=null){try{return ye.call(g)}catch{}try{return g+""}catch{}}return""}function ps(g,x){return g===x||g!==g&&x!==x}var nu=ls(function(){return arguments}())?ls:function(g){return Cr(g)&&ie.call(g,"callee")&&!Ct.call(g,"callee")},hi=Array.isArray;function su(g){return g!=null&&ys(g.length)&&!gs(g)}var qi=Tr||uu;function ou(g,x){return hs(g,x)}function gs(g){if(!_s(g))return!1;var x=Pr(g);return x==v||x==S||x==l||x==_}function ys(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=a}function _s(g){var x=typeof g;return g!=null&&(x=="object"||x=="function")}function Cr(g){return g!=null&&typeof g=="object"}var bs=fe?Ce(fe):kc;function au(g){return su(g)?Kc(g):Gc(g)}function cu(){return[]}function uu(){return!1}t.exports=ou})(xi,xi.exports);var Cy=xi.exports,Ny=zu(Cy);function Ry(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),a=s.charCodeAt(0);if(r[a]!==255)throw new TypeError(s+" is ambiguous");r[a]=n}var c=t.length,h=t.charAt(0),l=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function w(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var C=0,N=0,K=0,D=S.length;K!==D&&S[K]===0;)K++,C++;for(var I=(D-K)*f+1>>>0,_=new Uint8Array(I);K!==D;){for(var E=S[K],p=0,o=I-1;(E!==0||p<N)&&o!==-1;o--,p++)E+=256*_[o]>>>0,_[o]=E%c>>>0,E=E/c>>>0;if(E!==0)throw new Error("Non-zero carry");N=p,K++}for(var d=I-N;d!==I&&_[d]===0;)d++;for(var R=h.repeat(C);d<I;++d)R+=t.charAt(_[d]);return R}function y(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var C=0;if(S[C]!==" "){for(var N=0,K=0;S[C]===h;)N++,C++;for(var D=(S.length-C)*l+1>>>0,I=new Uint8Array(D);S[C];){var _=r[S.charCodeAt(C)];if(_===255)return;for(var E=0,p=D-1;(_!==0||E<K)&&p!==-1;p--,E++)_+=c*I[p]>>>0,I[p]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");K=E,C++}if(S[C]!==" "){for(var o=D-K;o!==D&&I[o]===0;)o++;for(var d=new Uint8Array(N+(D-o)),R=N;o!==D;)d[R++]=I[o++];return d}}}function v(S){var C=y(S);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:y,decode:v}}var $y=Ry,Ly=$y;const nc=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Uy=t=>new TextEncoder().encode(t),Fy=t=>new TextDecoder().decode(t);class My{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class jy{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return sc(this,e)}}class By{constructor(e){this.decoders=e}or(e){return sc(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const sc=(t,e)=>new By({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class qy{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new My(e,r,i),this.decoder=new jy(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ji=({name:t,prefix:e,encode:r,decode:i})=>new qy(t,e,r,i),oi=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=Ly(r,e);return ji({prefix:t,name:e,encode:i,decode:s=>nc(n(s))})},zy=(t,e,r,i)=>{const n={};for(let f=0;f<e.length;++f)n[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const a=new Uint8Array(s*r/8|0);let c=0,h=0,l=0;for(let f=0;f<s;++f){const w=n[t[f]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);h=h<<r|w,c+=r,c>=8&&(c-=8,a[l++]=255&h>>c)}if(c>=r||255&h<<8-c)throw new SyntaxError("Unexpected end of data");return a},Ky=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let s="",a=0,c=0;for(let h=0;h<t.length;++h)for(c=c<<8|t[h],a+=8;a>r;)a-=r,s+=e[n&c>>a];if(a&&(s+=e[n&c<<r-a]),i)for(;s.length*r&7;)s+="=";return s},nt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>ji({prefix:e,name:t,encode(n){return Ky(n,i,r)},decode(n){return zy(n,i,r,t)}}),Vy=ji({prefix:"\0",name:"identity",encode:t=>Fy(t),decode:t=>Uy(t)});var Hy=Object.freeze({__proto__:null,identity:Vy});const Wy=nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ky=Object.freeze({__proto__:null,base2:Wy});const Gy=nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Yy=Object.freeze({__proto__:null,base8:Gy});const Jy=oi({prefix:"9",name:"base10",alphabet:"0123456789"});var Xy=Object.freeze({__proto__:null,base10:Jy});const Qy=nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zy=nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var e0=Object.freeze({__proto__:null,base16:Qy,base16upper:Zy});const t0=nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),r0=nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),i0=nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),n0=nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),s0=nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),o0=nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),a0=nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),c0=nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),u0=nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var l0=Object.freeze({__proto__:null,base32:t0,base32upper:r0,base32pad:i0,base32padupper:n0,base32hex:s0,base32hexupper:o0,base32hexpad:a0,base32hexpadupper:c0,base32z:u0});const h0=oi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),f0=oi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var d0=Object.freeze({__proto__:null,base36:h0,base36upper:f0});const p0=oi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),g0=oi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var y0=Object.freeze({__proto__:null,base58btc:p0,base58flickr:g0});const _0=nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),b0=nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),w0=nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),m0=nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var v0=Object.freeze({__proto__:null,base64:_0,base64pad:b0,base64url:w0,base64urlpad:m0});const oc=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),E0=oc.reduce((t,e,r)=>(t[r]=e,t),[]),D0=oc.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function S0(t){return t.reduce((e,r)=>(e+=E0[r],e),"")}function O0(t){const e=[];for(const r of t){const i=D0[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const x0=ji({prefix:"\u{1F680}",name:"base256emoji",encode:S0,decode:O0});var I0=Object.freeze({__proto__:null,base256emoji:x0}),A0=ac,Co=128,T0=127,P0=~T0,C0=Math.pow(2,31);function ac(t,e,r){e=e||[],r=r||0;for(var i=r;t>=C0;)e[r++]=t&255|Co,t/=128;for(;t&P0;)e[r++]=t&255|Co,t>>>=7;return e[r]=t|0,ac.bytes=r-i+1,e}var N0=Fn,R0=128,No=127;function Fn(t,i){var r=0,i=i||0,n=0,s=i,a,c=t.length;do{if(s>=c)throw Fn.bytes=0,new RangeError("Could not decode varint");a=t[s++],r+=n<28?(a&No)<<n:(a&No)*Math.pow(2,n),n+=7}while(a>=R0);return Fn.bytes=s-i,r}var $0=Math.pow(2,7),L0=Math.pow(2,14),U0=Math.pow(2,21),F0=Math.pow(2,28),M0=Math.pow(2,35),j0=Math.pow(2,42),B0=Math.pow(2,49),q0=Math.pow(2,56),z0=Math.pow(2,63),K0=function(t){return t<$0?1:t<L0?2:t<U0?3:t<F0?4:t<M0?5:t<j0?6:t<B0?7:t<q0?8:t<z0?9:10},V0={encode:A0,decode:N0,encodingLength:K0},cc=V0;const Ro=(t,e,r=0)=>(cc.encode(t,e,r),e),$o=t=>cc.encodingLength(t),Mn=(t,e)=>{const r=e.byteLength,i=$o(t),n=i+$o(r),s=new Uint8Array(n+r);return Ro(t,s,0),Ro(r,s,i),s.set(e,n),new H0(t,r,e,s)};class H0{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const uc=({name:t,code:e,encode:r})=>new W0(t,e,r);class W0{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Mn(this.code,r):r.then(i=>Mn(this.code,i))}else throw Error("Unknown type, must be binary type")}}const lc=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),k0=uc({name:"sha2-256",code:18,encode:lc("SHA-256")}),G0=uc({name:"sha2-512",code:19,encode:lc("SHA-512")});var Y0=Object.freeze({__proto__:null,sha256:k0,sha512:G0});const hc=0,J0="identity",fc=nc,X0=t=>Mn(hc,fc(t)),Q0={code:hc,name:J0,encode:fc,digest:X0};var Z0=Object.freeze({__proto__:null,identity:Q0});new TextEncoder,new TextDecoder;const Lo={...Hy,...ky,...Yy,...Xy,...e0,...l0,...d0,...y0,...v0,...I0};({...Y0,...Z0});function dc(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function e_(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?dc(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function pc(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const Uo=pc("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),en=pc("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=e_(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),t_={utf8:Uo,"utf-8":Uo,hex:Lo.base16,latin1:en,ascii:en,binary:en,...Lo};function r_(t,e="utf8"){const r=t_[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?dc(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const gc="wc",i_=2,os="core",Jt=`${gc}@2:${os}:`,n_={name:os,logger:"error"},s_={database:":memory:"},o_="crypto",Fo="client_ed25519_seed",a_=Q.ONE_DAY,c_="keychain",u_="0.3",l_="messages",h_="0.3",f_=Q.SIX_HOURS,d_="publisher",yc="irn",p_="error",_c="wss://relay.walletconnect.com",Mo="wss://relay.walletconnect.org",g_="relayer",Le={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},y_="_subscription",Br={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},__=Q.ONE_SECOND/2,b_="2.9.1",w_=1e4,m_="0.3",v_="WALLETCONNECT_CLIENT_ID",Ut={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},E_="subscription",D_="0.3",S_=Q.FIVE_SECONDS*1e3,O_="pairing",x_="0.3",qr={wc_pairingDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:0},res:{ttl:Q.ONE_DAY,prompt:!1,tag:0}}},Lt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},I_="history",A_="0.3",T_="expirer",Ot={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},P_="0.3",tn="verify-api",jo="https://verify.walletconnect.com";class C_{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=c_,this.version=u_,this.initialized=!1,this.storagePrefix=Jt,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:s}=G("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=me.generateChildLogger(r,this.name)}get context(){return me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Wa(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ka(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class N_{constructor(e,r,i){this.core=e,this.logger=r,this.name=o_,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),s=io(n);return Ca(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=$p();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const s=await this.getClientSeed(),a=io(s),c=Nn();return await zd(c,n,a_,a)},this.generateSharedKey=(n,s,a)=>{this.isInitialized();const c=this.getPrivateKey(n),h=Lp(c,s);return this.setSymKey(h,a)},this.setSymKey=async(n,s)=>{this.isInitialized();const a=s||Up(n);return await this.keychain.set(a,n),a},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,s,a)=>{this.isInitialized();const c=Va(a),h=qn(s);if(go(c)){const y=c.senderPublicKey,v=c.receiverPublicKey;n=await this.generateSharedKey(y,v)}const l=this.getSymKey(n),{type:f,senderPublicKey:w}=c;return Mp({type:f,symKey:l,message:h,senderPublicKey:w})},this.decode=async(n,s,a)=>{this.isInitialized();const c=qp(s,a);if(go(c)){const h=c.receiverPublicKey,l=c.senderPublicKey;n=await this.generateSharedKey(h,l)}try{const h=this.getSymKey(n),l=jp({symKey:h,encoded:s});return ya(l)}catch(h){this.logger.error(`Failed to decode message from topic: '${n}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}},this.getPayloadType=n=>{const s=Di(n);return ni(s.type)},this.getPayloadSenderPublicKey=n=>{const s=Di(n);return s.senderPublicKey?gt(s.senderPublicKey,pt):void 0},this.core=e,this.logger=me.generateChildLogger(r,this.name),this.keychain=i||new C_(this.core,this.logger)}get context(){return me.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Fo)}catch{e=Nn(),await this.keychain.set(Fo,e)}return r_(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class R_ extends Vh{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=l_,this.version=h_,this.initialized=!1,this.storagePrefix=Jt,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const s=Dr(n);let a=this.messages.get(i);return typeof a>"u"&&(a={}),typeof a[s]<"u"||(a[s]=n,this.messages.set(i,a),await this.persist()),s},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const s=this.get(i),a=Dr(n);return typeof s[a]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=me.generateChildLogger(e,this.name),this.core=r}get context(){return me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Wa(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ka(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $_ extends Hh{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new ae,this.name=d_,this.queue=new Map,this.publishTimeout=Q.toMiliseconds(Q.TEN_SECONDS),this.queueTimeout=Q.toMiliseconds(Q.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,n,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}});try{const a=s?.ttl||f_,c=Rn(s),h=s?.prompt||!1,l=s?.tag||0,f=s?.id||rs().toString(),w={topic:i,message:n,opts:{ttl:a,relay:c,prompt:h,tag:l,id:f}},y=setTimeout(()=>this.queue.set(f,w),this.queueTimeout);try{await await Si(this.rpcPublish(i,n,a,c,h,l,f),this.publishTimeout),clearTimeout(y),this.relayer.events.emit(Le.publish,w)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:s}})}catch(a){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(a),a}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=me.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return me.getLoggerContext(this.logger)}rpcPublish(e,r,i,n,s,a,c){var h,l,f,w;const y={method:bi(n.protocol).publish,params:{topic:e,message:r,ttl:i,prompt:s,tag:a},id:c};return dt((h=y.params)==null?void 0:h.prompt)&&((l=y.params)==null||delete l.prompt),dt((f=y.params)==null?void 0:f.tag)&&((w=y.params)==null||delete w.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:y}),this.relayer.request(y)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:i,opts:n}=e;await this.publish(r,i,n)})}registerEventListeners(){this.relayer.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Le.connection_stalled);return}this.checkQueue()}),this.relayer.on(Le.message_ack,e=>{this.onPublish(e.id.toString())})}}class L_{constructor(){this.map=new Map,this.set=(e,r)=>{const i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,r))return;const n=i.filter(s=>s!==r);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var U_=Object.defineProperty,F_=Object.defineProperties,M_=Object.getOwnPropertyDescriptors,Bo=Object.getOwnPropertySymbols,j_=Object.prototype.hasOwnProperty,B_=Object.prototype.propertyIsEnumerable,qo=(t,e,r)=>e in t?U_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zr=(t,e)=>{for(var r in e||(e={}))j_.call(e,r)&&qo(t,r,e[r]);if(Bo)for(var r of Bo(e))B_.call(e,r)&&qo(t,r,e[r]);return t},rn=(t,e)=>F_(t,M_(e));class q_ extends Gh{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new L_,this.events=new ae,this.name=E_,this.version=D_,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Jt,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const s=Rn(n),a={topic:i,relay:s};this.pending.set(i,a);const c=await this.rpcSubscribe(i,s);return this.onSubscribe(c,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}}),c}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof n?.id<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((n,s)=>{const a=new Q.Watch;a.start(this.pendingSubscriptionWatchLabel);const c=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(c),a.stop(this.pendingSubscriptionWatchLabel),n(!0)),a.elapsed(this.pendingSubscriptionWatchLabel)>=S_&&(clearInterval(c),a.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=me.generateChildLogger(r,this.name),this.clientId=""}get context(){return me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{const n=Rn(i);await this.rpcUnsubscribe(e,r,n);const s=et("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,r){const i={method:bi(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await Si(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Le.connection_stalled)}return Dr(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,i={method:bi(r.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Si(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Le.connection_stalled)}}rpcUnsubscribe(e,r,i){const n={method:bi(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,r){this.setSubscription(e,rn(zr({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,zr({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,zr({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ut.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:i}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(Ut.deleted,rn(zr({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ut.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Ut.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);si(r)&&this.onBatchSubscribe(r.map((i,n)=>rn(zr({},e[n]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Le.connect,async()=>{await this.onConnect()}),this.relayer.on(Le.disconnect,()=>{this.onDisconnect()}),this.events.on(Ut.created,async e=>{const r=Ut.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Ut.deleted,async e=>{const r=Ut.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var z_=Object.defineProperty,zo=Object.getOwnPropertySymbols,K_=Object.prototype.hasOwnProperty,V_=Object.prototype.propertyIsEnumerable,Ko=(t,e,r)=>e in t?z_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H_=(t,e)=>{for(var r in e||(e={}))K_.call(e,r)&&Ko(t,r,e[r]);if(zo)for(var r of zo(e))V_.call(e,r)&&Ko(t,r,e[r]);return t};class W_ extends Wh{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ae,this.name=g_,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?me.generateChildLogger(e.logger,this.name):me.pino(me.getDefaultLoggerOptions({level:e.logger||p_})),this.messages=new R_(this.logger,e.core),this.subscriber=new q_(this,this.logger),this.publisher=new $_(this,this.logger),this.relayUrl=e?.relayUrl||_c,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Mo}...`),await this.restartTransport(Mo)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},w_)}get context(){return me.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var i;this.isInitialized();let n=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";return n||(await Promise.all([new Promise(s=>{this.subscriber.once(Ut.created,a=>{a.topic===e&&s()})}),new Promise(async s=>{n=await this.subscriber.subscribe(e,r),s()})]),n)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Le.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Ut.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,i)=>{await Si(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(n=>i(n)).then(()=>r()).finally(()=>this.removeListener(Le.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(Le.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const i=r;if(!this.isConnectionStalled(i.message))throw r;this.events.emit(Le.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(Br.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new xy(new Py(Qp({sdkVersion:b_,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:i}=e;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(e){const{topic:r,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const n=this.messages.has(r,i);return n&&this.logger.debug(`Ignoring duplicate message: ${i}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ss(e)){if(!e.method.endsWith(y_))return;const r=e.params,{topic:i,message:n,publishedAt:s}=r.data,a={topic:i,message:n,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(H_({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Mi(e)&&this.events.emit(Le.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Le.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=is(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(Br.payload,e=>this.onProviderPayload(e)),this.provider.on(Br.connect,()=>{this.events.emit(Le.connect)}),this.provider.on(Br.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Br.error,e=>{this.logger.error(e),this.events.emit(Le.error,e)})}registerEventListeners(){this.events.on(Le.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Le.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},Q.toMiliseconds(__))}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var k_=Object.defineProperty,Vo=Object.getOwnPropertySymbols,G_=Object.prototype.hasOwnProperty,Y_=Object.prototype.propertyIsEnumerable,Ho=(t,e,r)=>e in t?k_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wo=(t,e)=>{for(var r in e||(e={}))G_.call(e,r)&&Ho(t,r,e[r]);if(Vo)for(var r of Vo(e))Y_.call(e,r)&&Ho(t,r,e[r]);return t};class Bi extends kh{constructor(e,r,i,n=Jt,s=void 0){super(e,r,i,n),this.core=e,this.logger=r,this.name=i,this.map=new Map,this.version=m_,this.cached=[],this.initialized=!1,this.storagePrefix=Jt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!dt(a)?this.map.set(this.getKey(a),a):vg(a)?this.map.set(a.id,a):Eg(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)},this.set=async(a,c)=>{this.isInitialized(),this.map.has(a)?await this.update(a,c):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:c}),this.map.set(a,c),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(c=>Object.keys(a).every(h=>Ny(c[h],a[h]))):this.values),this.update=async(a,c)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:c});const h=Wo(Wo({},this.getData(a)),c);this.map.set(a,h),await this.persist()},this.delete=async(a,c)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:c}),this.map.delete(a),await this.persist())},this.logger=me.generateChildLogger(r,this.name),this.storagePrefix=n,this.getKey=s}get context(){return me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:i}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class J_{constructor(e,r){this.core=e,this.logger=r,this.name=O_,this.version=x_,this.events=new ae,this.initialized=!1,this.storagePrefix=Jt,this.ignoredPayloadTypes=[yr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=Nn(),n=await this.core.crypto.setSymKey(i),s=At(Q.FIVE_MINUTES),a={protocol:yc},c={topic:n,expiry:s,relay:a,active:!1},h=hg({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:i,relay:a});return await this.pairings.set(n,c),await this.core.relayer.subscribe(n),this.core.expirer.set(n,s),{topic:n,uri:h}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:n,symKey:s,relay:a}=cg(i.uri);if(this.pairings.keys.includes(n))throw new Error(`Pairing already exists: ${n}`);if(this.core.crypto.hasKeys(n))throw new Error(`Keychain already exists: ${n}`);const c=At(Q.FIVE_MINUTES),h={topic:n,relay:a,expiry:c,active:!1};return await this.pairings.set(n,h),await this.core.crypto.setSymKey(s,n),await this.core.relayer.subscribe(n,{relay:a}),this.core.expirer.set(n,c),i.activatePairing&&await this.activate({topic:n}),h},this.activate=async({topic:i})=>{this.isInitialized();const n=At(Q.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:n}),this.core.expirer.set(i,n)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:n}=i;if(this.pairings.keys.includes(n)){const s=await this.sendRequest(n,"wc_pairingPing",{}),{done:a,resolve:c,reject:h}=vr();this.events.once(ze("pairing_ping",s),({error:l})=>{l?h(l):c()}),await a()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",et("USER_DISCONNECTED")),await this.deletePairing(n))},this.sendRequest=async(i,n,s)=>{const a=Fi(n,s),c=await this.core.crypto.encode(i,a),h=qr[n].req;return this.core.history.set(i,a),this.core.relayer.publish(i,c,h),a.id},this.sendResult=async(i,n,s)=>{const a=is(i,s),c=await this.core.crypto.encode(n,a),h=await this.core.history.get(n,i),l=qr[h.request.method].res;await this.core.relayer.publish(n,c,l),await this.core.history.resolve(a)},this.sendError=async(i,n,s)=>{const a=ns(i,s),c=await this.core.crypto.encode(n,a),h=await this.core.history.get(n,i),l=qr[h.request.method]?qr[h.request.method].res:qr.unregistered_method.res;await this.core.relayer.publish(n,c,l),await this.core.history.resolve(a)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,et("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>kt(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:s}=i;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(n,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,s);default:return this.onUnknownRpcMethodRequest(n,s)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:s}=i,a=(await this.core.history.get(n,s.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(n,s);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(i,n)=>{const{id:s}=n;try{this.isValidPing({topic:i}),await this.sendResult(s,i,!0),this.events.emit("pairing_ping",{id:s,topic:i})}catch(a){await this.sendError(s,i,a),this.logger.error(a)}},this.onPairingPingResponse=(i,n)=>{const{id:s}=n;setTimeout(()=>{qt(n)?this.events.emit(ze("pairing_ping",s),{}):Tt(n)&&this.events.emit(ze("pairing_ping",s),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:s}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:s,topic:i})}catch(a){await this.sendError(s,i,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:s,method:a}=n;try{if(this.registeredMethods.includes(a))return;const c=et("WC_METHOD_UNSUPPORTED",a);await this.sendError(s,i,c),this.logger.error(c)}catch(c){await this.sendError(s,i,c),this.logger.error(c)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(et("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!yt(i)){const{message:n}=G("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(n)}if(!mg(i.uri)){const{message:n}=G("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(n)}},this.isValidPing=async i=>{if(!yt(i)){const{message:s}=G("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!yt(i)){const{message:s}=G("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(s)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!tt(i,!1)){const{message:n}=G("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=G("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(kt(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=G("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=e,this.logger=me.generateChildLogger(r,this.name),this.pairings=new Bi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return me.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Le.message,async e=>{const{topic:r,message:i}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const n=await this.core.crypto.decode(r,i);ss(n)?(this.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):Mi(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:r,payload:n}),this.core.history.delete(r,n.id))})}registerExpirerEvents(){this.core.expirer.on(Ot.expired,async e=>{const{topic:r}=Ya(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class X_ extends Kh{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new ae,this.name=I_,this.version=A_,this.cached=[],this.initialized=!1,this.storagePrefix=Jt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:s}),this.records.has(n.id))return;const a={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:s,expiry:At(Q.THIRTY_DAYS)};this.records.set(a.id,a),this.events.emit(Lt.created,a)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=Tt(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.events.emit(Lt.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(s=>{if(s.topic===i){if(typeof n<"u"&&s.id!==n)return;this.records.delete(s.id),this.events.emit(Lt.deleted,s)}})},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=me.generateChildLogger(r,this.name)}get context(){return me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:Fi(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:i}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lt.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Lt.created,e=>{const r=Lt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.updated,e=>{const r=Lt.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.deleted,e=>{const r=Lt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{Q.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Q_ extends Yh{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new ae,this.name=T_,this.version=P_,this.cached=[],this.initialized=!1,this.storagePrefix=Jt,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const s=this.formatTarget(i),a={target:s,expiry:n};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(Ot.created,{target:s,expiration:a})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),s=this.getExpiration(n);this.expirations.delete(n),this.events.emit(Ot.deleted,{target:n,expiration:s})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=me.generateChildLogger(r,this.name)}get context(){return me.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Zp(e);if(typeof e=="number")return eg(e);const{message:r}=G("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ot.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=G("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:i}=G("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}checkExpiry(e,r){const{expiry:i}=r;Q.toMiliseconds(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ot.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Or.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ot.created,e=>{const r=Ot.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ot.expired,e=>{const r=Ot.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ot.deleted,e=>{const r=Ot.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Z_ extends Jh{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=tn,this.initialized=!1,this.init=async i=>{Ha()||!Qn()||(this.verifyUrl=i?.verifyUrl||jo,await this.createIframe())},this.register=async i=>{var n;if(this.initialized||await this.init(),!!this.iframe)try{(n=this.iframe.contentWindow)==null||n.postMessage(i.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${i.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async i=>{var n;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${i.attestationId}`);const s=this.startAbortTimer(Q.FIVE_SECONDS),a=await fetch(`${this.verifyUrl}/attestation/${i.attestationId}`,{signal:this.abortController.signal});return clearTimeout(s),a.status===200?(n=await a.json())==null?void 0:n.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((i,n)=>{if(document.getElementById(tn))return i();const s=document.createElement("iframe");s.setAttribute("id",tn),s.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),s.style.display="none",s.addEventListener("load",()=>{this.initialized=!0,i()}),s.addEventListener("error",a=>{n(a)}),document.body.append(s),this.iframe=s}),new Promise(i=>{setTimeout(()=>i("iframe load timeout"),Q.toMiliseconds(Q.ONE_SECOND/2))})])}catch(i){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(i)}},this.logger=me.generateChildLogger(r,this.name),this.verifyUrl=jo,this.abortController=new AbortController,this.isDevEnv=Xn()&&process.env.IS_VITEST}get context(){return me.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),Q.toMiliseconds(e))}}var e1=Object.defineProperty,ko=Object.getOwnPropertySymbols,t1=Object.prototype.hasOwnProperty,r1=Object.prototype.propertyIsEnumerable,Go=(t,e,r)=>e in t?e1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yo=(t,e)=>{for(var r in e||(e={}))t1.call(e,r)&&Go(t,r,e[r]);if(ko)for(var r of ko(e))r1.call(e,r)&&Go(t,r,e[r]);return t};class as extends zh{constructor(e){super(e),this.protocol=gc,this.version=i_,this.name=os,this.events=new ae,this.initialized=!1,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||_c;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:me.pino(me.getDefaultLoggerOptions({level:e?.logger||n_.logger}));this.logger=me.generateChildLogger(r,this.name),this.heartbeat=new Or.HeartBeat,this.crypto=new N_(this,this.logger,e?.keychain),this.history=new X_(this,this.logger),this.expirer=new Q_(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new _l(Yo(Yo({},s_),e?.storageOptions)),this.relayer=new W_({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new J_(this,this.logger),this.verify=new Z_(this.projectId||"",this.logger)}static async init(e){const r=new as(e);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(v_,i),r}get context(){return me.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const i1=as,bc="wc",wc=2,mc="client",cs=`${bc}@${wc}:${mc}:`,nn={name:mc,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},n1="WALLETCONNECT_DEEPLINK_CHOICE",s1="proposal",o1="Proposal expired",a1="session",_i=Q.SEVEN_DAYS,c1="engine",Kr={wc_sessionPropose:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Q.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Q.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Q.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Q.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Q.THIRTY_SECONDS,prompt:!1,tag:1115}}},sn={min:Q.FIVE_MINUTES,max:Q.SEVEN_DAYS},Vr={idle:"idle",active:"active"},u1="request",l1=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var h1=Object.defineProperty,f1=Object.defineProperties,d1=Object.getOwnPropertyDescriptors,Jo=Object.getOwnPropertySymbols,p1=Object.prototype.hasOwnProperty,g1=Object.prototype.propertyIsEnumerable,Xo=(t,e,r)=>e in t?h1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,St=(t,e)=>{for(var r in e||(e={}))p1.call(e,r)&&Xo(t,r,e[r]);if(Jo)for(var r of Jo(e))g1.call(e,r)&&Xo(t,r,e[r]);return t},on=(t,e)=>f1(t,d1(e));class y1 extends Qh{constructor(e){super(e),this.name=c1,this.events=new ae,this.initialized=!1,this.ignoredPayloadTypes=[yr],this.requestQueue={state:Vr.idle,requests:[]},this.requestQueueDelay=Q.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Kr)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},Q.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized();const i=on(St({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:c,relays:h}=i;let l=n,f,w=!1;if(l&&(w=this.client.core.pairing.pairings.get(l).active),!l||!w){const{topic:I,uri:_}=await this.client.core.pairing.create();l=I,f=_}const y=await this.client.core.crypto.generateKeyPair(),v=St({requiredNamespaces:s,optionalNamespaces:a,relays:h??[{protocol:yc}],proposer:{publicKey:y,metadata:this.client.metadata}},c&&{sessionProperties:c}),{reject:S,resolve:C,done:N}=vr(Q.FIVE_MINUTES,o1);if(this.events.once(ze("session_connect"),async({error:I,session:_})=>{if(I)S(I);else if(_){_.self.publicKey=y;const E=on(St({},_),{requiredNamespaces:_.requiredNamespaces,optionalNamespaces:_.optionalNamespaces});await this.client.session.set(_.topic,E),await this.setExpiry(_.topic,_.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:_.peer.metadata}),C(E)}}),!l){const{message:I}=G("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(I)}const K=await this.sendRequest(l,"wc_sessionPropose",v),D=At(Q.FIVE_MINUTES);return await this.setProposal(K,St({id:K,expiry:D},v)),{uri:f,approval:N}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:i,relayProtocol:n,namespaces:s,sessionProperties:a}=r,c=this.client.proposal.get(i);let{pairingTopic:h,proposer:l,requiredNamespaces:f,optionalNamespaces:w}=c;h=h||"",Wr(f)||(f=gg(s,"approve()"));const y=await this.client.core.crypto.generateKeyPair(),v=l.publicKey,S=await this.client.core.crypto.generateSharedKey(y,v);h&&i&&(await this.client.core.pairing.updateMetadata({topic:h,metadata:l.metadata}),await this.sendResult(i,h,{relay:{protocol:n??"irn"},responderPublicKey:y}),await this.client.proposal.delete(i,et("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:h}));const C=St({relay:{protocol:n??"irn"},namespaces:s,requiredNamespaces:f,optionalNamespaces:w,pairingTopic:h,controller:{publicKey:y,metadata:this.client.metadata},expiry:At(_i)},a&&{sessionProperties:a});await this.client.core.relayer.subscribe(S),await this.sendRequest(S,"wc_sessionSettle",C);const N=on(St({},C),{topic:S,pairingTopic:h,acknowledged:!1,self:C.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:y});return await this.client.session.set(S,N),await this.setExpiry(S,At(_i)),{topic:S,acknowledged:()=>new Promise(K=>setTimeout(()=>K(this.client.session.get(S)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:i,reason:n}=r,{pairingTopic:s}=this.client.proposal.get(i);s&&(await this.sendError(i,s,n),await this.client.proposal.delete(i,et("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:i,namespaces:n}=r,s=await this.sendRequest(i,"wc_sessionUpdate",{namespaces:n}),{done:a,resolve:c,reject:h}=vr();return this.events.once(ze("session_update",s),({error:l})=>{l?h(l):c()}),await this.client.session.update(i,{namespaces:n}),{acknowledged:a}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:i}=r,n=await this.sendRequest(i,"wc_sessionExtend",{}),{done:s,resolve:a,reject:c}=vr();return this.events.once(ze("session_extend",n),({error:h})=>{h?c(h):a()}),await this.setExpiry(i,At(_i)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:i,request:n,topic:s,expiry:a}=r,c=await this.sendRequest(s,"wc_sessionRequest",{request:n,chainId:i},a),{done:h,resolve:l,reject:f}=vr(a);this.events.once(ze("session_request",c),({error:y,result:v})=>{y?f(y):l(v)}),this.client.events.emit("session_request_sent",{topic:s,request:n,chainId:i,id:c});const w=await this.client.core.storage.getItem(n1);return tg({id:c,topic:s,wcDeepLink:w}),await h()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:s}=n;qt(n)?await this.sendResult(s,i,n.result):Tt(n)&&await this.sendError(s,i,n.error),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=await this.sendRequest(i,"wc_sessionPing",{}),{done:s,resolve:a,reject:c}=vr();this.events.once(ze("session_ping",n),({error:h})=>{h?c(h):a()}),await s()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:i,event:n,chainId:s}=r;await this.sendRequest(i,"wc_sessionEvent",{event:n,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=rs().toString();let s;const a=c=>{c?.id.toString()===n&&(this.client.core.relayer.events.removeListener(Le.message_ack,a),s())};await Promise.all([new Promise(c=>{s=c,this.client.core.relayer.on(Le.message_ack,a)}),this.sendRequest(i,"wc_sessionDelete",et("USER_DISCONNECTED"),void 0,n)]),await this.deleteSession(i)}else await this.client.core.pairing.disconnect({topic:i})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>bg(i,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(s=>{var a,c;return((a=s.peerMetadata)==null?void 0:a.url)&&((c=s.peerMetadata)==null?void 0:c.url)===r.peer.metadata.url&&s.topic&&s.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(r,i)=>{const{self:n}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,et("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(n.publicKey)&&await this.client.core.crypto.deleteKeyPair(n.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),i||this.client.core.expirer.del(r)},this.deleteProposal=async(r,i)=>{await Promise.all([this.client.proposal.delete(r,et("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)]),this.requestQueue.requests=this.requestQueue.requests.filter(s=>s.id!==r),n&&(this.requestQueue.state=Vr.idle)},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:i}),this.client.core.expirer.set(r,i)},this.setProposal=async(r,i)=>{await this.client.proposal.set(r,i),this.client.core.expirer.set(r,i.expiry)},this.setPendingSessionRequest=async r=>{const i=Kr.wc_sessionRequest.req.ttl,{id:n,topic:s,params:a}=r;await this.client.pendingRequest.set(n,{id:n,topic:s,params:a}),i&&this.client.core.expirer.set(n,At(i))},this.sendRequest=async(r,i,n,s,a)=>{const c=Fi(i,n);if(Qn()&&l1.includes(i)){const f=Dr(JSON.stringify(c));await this.client.core.verify.register({attestationId:f})}const h=await this.client.core.crypto.encode(r,c),l=Kr[i].req;return s&&(l.ttl=s),a&&(l.id=a),this.client.core.history.set(r,c),this.client.core.relayer.publish(r,h,l),c.id},this.sendResult=async(r,i,n)=>{const s=is(r,n),a=await this.client.core.crypto.encode(i,s),c=await this.client.core.history.get(i,r),h=Kr[c.request.method].res;this.client.core.relayer.publish(i,a,h),await this.client.core.history.resolve(s)},this.sendError=async(r,i,n)=>{const s=ns(r,n),a=await this.client.core.crypto.encode(i,s),c=await this.client.core.history.get(i,r),h=Kr[c.request.method].res;this.client.core.relayer.publish(i,a,h),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{kt(n.expiry)&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{kt(n.expiry)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession(n)),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=r=>{const{topic:i,payload:n}=r,s=n.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(i,n);case"wc_sessionSettle":return this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return this.onSessionExtendRequest(i,n);case"wc_sessionPing":return this.onSessionPingRequest(i,n);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return this.onSessionRequest(i,n);case"wc_sessionEvent":return this.onSessionEventRequest(i,n);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:n}=r,s=(await this.client.core.history.get(i,n.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:i}=r,{message:n}=G("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(n)},this.onSessionProposeRequest=async(r,i)=>{const{params:n,id:s}=i;try{this.isValidConnect(St({},i.params));const a=At(Q.FIVE_MINUTES),c=St({id:s,pairingTopic:r,expiry:a},n);await this.setProposal(s,c);const h=Dr(JSON.stringify(i)),l=await this.getVerifyContext(h,c.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:c,verifyContext:l})}catch(a){await this.sendError(s,r,a),this.client.logger.error(a)}},this.onSessionProposeResponse=async(r,i)=>{const{id:n}=i;if(qt(i)){const{result:s}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const a=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const h=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const l=await this.client.core.crypto.generateSharedKey(c,h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const f=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else Tt(i)&&(await this.client.proposal.delete(n,et("USER_DISCONNECTED")),this.events.emit(ze("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidSessionSettleRequest(s);const{relay:a,controller:c,expiry:h,namespaces:l,requiredNamespaces:f,optionalNamespaces:w,sessionProperties:y,pairingTopic:v}=i.params,S=St({topic:r,relay:a,expiry:h,namespaces:l,acknowledged:!0,pairingTopic:v,requiredNamespaces:f,optionalNamespaces:w,controller:c.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},y&&{sessionProperties:y});await this.sendResult(i.id,r,!0),this.events.emit(ze("session_connect"),{session:S}),this.cleanupDuplicatePairings(S)}catch(a){await this.sendError(n,r,a),this.client.logger.error(a)}},this.onSessionSettleResponse=async(r,i)=>{const{id:n}=i;qt(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(ze("session_approve",n),{})):Tt(i)&&(await this.client.session.delete(r,et("USER_DISCONNECTED")),this.events.emit(ze("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:n,id:s}=i;try{this.isValidUpdate(St({topic:r},n)),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:n})}catch(a){await this.sendError(s,r,a),this.client.logger.error(a)}},this.onSessionUpdateResponse=(r,i)=>{const{id:n}=i;qt(i)?this.events.emit(ze("session_update",n),{}):Tt(i)&&this.events.emit(ze("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,At(_i)),await this.sendResult(n,r,!0),this.client.events.emit("session_extend",{id:n,topic:r})}catch(s){await this.sendError(n,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,i)=>{const{id:n}=i;qt(i)?this.events.emit(ze("session_extend",n),{}):Tt(i)&&this.events.emit(ze("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult(n,r,!0),this.client.events.emit("session_ping",{id:n,topic:r})}catch(s){await this.sendError(n,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,i)=>{const{id:n}=i;setTimeout(()=>{qt(i)?this.events.emit(ze("session_ping",n),{}):Tt(i)&&this.events.emit(ze("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Le.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult(n,r,!0)]),this.client.events.emit("session_delete",{id:n,topic:r})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidRequest(St({topic:r},s)),await this.setPendingSessionRequest({id:n,topic:r,params:s}),this.addRequestToQueue({id:n,topic:r,params:s}),await this.processRequestQueue()}catch(a){await this.sendError(n,r,a),this.client.logger.error(a)}},this.onSessionRequestResponse=(r,i)=>{const{id:n}=i;qt(i)?this.events.emit(ze("session_request",n),{result:i.result}):Tt(i)&&this.events.emit(ze("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:n,params:s}=i;try{this.isValidEmit(St({topic:r},s)),this.client.events.emit("session_event",{id:n,topic:r,params:s})}catch(a){await this.sendError(n,r,a),this.client.logger.error(a)}},this.addRequestToQueue=r=>{this.requestQueue.requests.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=Vr.idle,this.processRequestQueue()},Q.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===Vr.active){this.client.logger.info("session request queue is already active.");return}const r=this.requestQueue.requests[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:i,topic:n,params:s}=r,a=Dr(JSON.stringify({id:i,params:s})),c=this.client.session.get(n),h=await this.getVerifyContext(a,c.peer.metadata);this.requestQueue.state=Vr.active,this.client.events.emit("session_request",{id:i,topic:n,params:s,verifyContext:h})}catch(i){this.client.logger.error(i)}},this.isValidConnect=async r=>{if(!yt(r)){const{message:h}=G("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(h)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:s,sessionProperties:a,relays:c}=r;if(dt(i)||await this.isValidPairingTopic(i),!Pg(c,!0)){const{message:h}=G("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(h)}!dt(n)&&Wr(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!dt(s)&&Wr(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),dt(a)||this.validateSessionProps(a,"sessionProperties")},this.validateNamespaces=(r,i)=>{const n=Tg(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!yt(r))throw new Error(G("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:s,sessionProperties:a}=r;await this.isValidProposalId(i);const c=this.client.proposal.get(i),h=wi(n,"approve()");if(h)throw new Error(h.message);const l=Do(c.requiredNamespaces,n,"approve()");if(l)throw new Error(l.message);if(!tt(s,!0)){const{message:f}=G("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}dt(a)||this.validateSessionProps(a,"sessionProperties")},this.isValidReject=async r=>{if(!yt(r)){const{message:s}=G("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:i,reason:n}=r;if(await this.isValidProposalId(i),!Ng(n)){const{message:s}=G("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!yt(r)){const{message:l}=G("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:i,controller:n,namespaces:s,expiry:a}=r;if(!Xa(i)){const{message:l}=G("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const c=Dg(n,"onSessionSettleRequest()");if(c)throw new Error(c.message);const h=wi(s,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(kt(a)){const{message:l}=G("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!yt(r)){const{message:h}=G("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(h)}const{topic:i,namespaces:n}=r;await this.isValidSessionTopic(i);const s=this.client.session.get(i),a=wi(n,"update()");if(a)throw new Error(a.message);const c=Do(s.requiredNamespaces,n,"update()");if(c)throw new Error(c.message)},this.isValidExtend=async r=>{if(!yt(r)){const{message:n}=G("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!yt(r)){const{message:h}=G("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(h)}const{topic:i,request:n,chainId:s,expiry:a}=r;await this.isValidSessionTopic(i);const{namespaces:c}=this.client.session.get(i);if(!Eo(c,s)){const{message:h}=G("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(h)}if(!Rg(n)){const{message:h}=G("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(h)}if(!Ug(c,s,n.method)){const{message:h}=G("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(h)}if(a&&!Bg(a,sn)){const{message:h}=G("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${sn.min} and ${sn.max}`);throw new Error(h)}},this.isValidRespond=async r=>{if(!yt(r)){const{message:s}=G("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:i,response:n}=r;if(await this.isValidSessionTopic(i),!$g(n)){const{message:s}=G("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!yt(r)){const{message:n}=G("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!yt(r)){const{message:c}=G("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(c)}const{topic:i,event:n,chainId:s}=r;await this.isValidSessionTopic(i);const{namespaces:a}=this.client.session.get(i);if(!Eo(a,s)){const{message:c}=G("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(c)}if(!Lg(n)){const{message:c}=G("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(c)}if(!Fg(a,s,n.name)){const{message:c}=G("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(c)}},this.isValidDisconnect=async r=>{if(!yt(r)){const{message:n}=G("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(r,i)=>{const n={verified:{verifyUrl:i.verifyUrl||"",validation:"UNKNOWN",origin:i.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});s&&(n.verified.origin=s,n.verified.validation=s===i.url?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!tt(n,!1)){const{message:s}=G("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:e}=G("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Le.message,async e=>{const{topic:r,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const n=await this.client.core.crypto.decode(r,i);ss(n)?(this.client.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):Mi(n)?(await this.client.core.history.resolve(n),await this.onRelayEventResponse({topic:r,payload:n}),this.client.core.history.delete(r,n.id)):this.onRelayEventUnknownPayload({topic:r,payload:n})})}registerExpirerEvents(){this.client.core.expirer.on(Ot.expired,async e=>{const{topic:r,id:i}=Ya(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,G("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}isValidPairingTopic(e){if(!tt(e,!1)){const{message:r}=G("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(kt(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=G("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!tt(e,!1)){const{message:r}=G("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(kt(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=G("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(tt(e,!1)){const{message:r}=G("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=G("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Cg(e)){const{message:r}=G("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=G("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(kt(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=G("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class _1 extends Bi{constructor(e,r){super(e,r,s1,cs),this.core=e,this.logger=r}}class b1 extends Bi{constructor(e,r){super(e,r,a1,cs),this.core=e,this.logger=r}}class w1 extends Bi{constructor(e,r){super(e,r,u1,cs,i=>i.id),this.core=e,this.logger=r}}let m1=class vc extends Xh{constructor(e){super(e),this.protocol=bc,this.version=wc,this.name=nn.name,this.events=new ae,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||nn.name,this.metadata=e?.metadata||Gp();const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:me.pino(me.getDefaultLoggerOptions({level:e?.logger||nn.logger}));this.core=e?.core||new i1(e),this.logger=me.generateChildLogger(r,this.name),this.session=new b1(this.core,this.logger),this.proposal=new _1(this.core,this.logger),this.pendingRequest=new w1(this.core,this.logger),this.engine=new y1(this)}static async init(e){const r=new vc(e);return await r.initialize(),r}get context(){return me.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var v1=Object.defineProperty,E1=Object.defineProperties,D1=Object.getOwnPropertyDescriptors,Qo=Object.getOwnPropertySymbols,S1=Object.prototype.hasOwnProperty,O1=Object.prototype.propertyIsEnumerable,Zo=(t,e,r)=>e in t?v1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x1=(t,e)=>{for(var r in e||(e={}))S1.call(e,r)&&Zo(t,r,e[r]);if(Qo)for(var r of Qo(e))O1.call(e,r)&&Zo(t,r,e[r]);return t},I1=(t,e)=>E1(t,D1(e)),us=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},Te=(t,e,r)=>(us(t,e,"read from private field"),r?r.call(t):e.get(t)),lr=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Ii=(t,e,r,i)=>(us(t,e,"write to private field"),i?i.call(t,r):e.set(t,r),r),ct=(t,e,r)=>(us(t,e,"access private method"),r),hr,Er,Hr,Ze,jn,Ec,ut,ft,Bn,ea;class B1{constructor(e){lr(this,jn),lr(this,ut),lr(this,Bn),lr(this,hr,void 0),lr(this,Er,void 0),lr(this,Hr,void 0),lr(this,Ze,void 0),Ii(this,hr,e),Ii(this,Er,ct(this,jn,Ec).call(this)),ct(this,ut,ft).call(this)}async connect(e){const{requiredNamespaces:r,optionalNamespaces:i}=e;return new Promise(async(n,s)=>{await ct(this,ut,ft).call(this);const a=Te(this,Er).subscribeModal(l=>{l.open||(a(),s(new Error("Modal closed")))}),{uri:c,approval:h}=await Te(this,Ze).connect(e);if(c){const l=new Set;r&&Object.values(r).forEach(({chains:f})=>{f&&f.forEach(w=>l.add(w))}),i&&Object.values(i).forEach(({chains:f})=>{f&&f.forEach(w=>l.add(w))}),await Te(this,Er).openModal({uri:c,chains:Array.from(l)})}try{const l=await h();n(l)}catch(l){s(l)}finally{a(),Te(this,Er).closeModal()}})}async disconnect(e){await ct(this,ut,ft).call(this),await Te(this,Ze).disconnect(e)}async request(e){return await ct(this,ut,ft).call(this),await Te(this,Ze).request(e)}async getSessions(){return await ct(this,ut,ft).call(this),Te(this,Ze).session.getAll()}async getSession(){return await ct(this,ut,ft).call(this),Te(this,Ze).session.getAll().at(-1)}async onSessionEvent(e){await ct(this,ut,ft).call(this),Te(this,Ze).on("session_event",e)}async offSessionEvent(e){await ct(this,ut,ft).call(this),Te(this,Ze).off("session_event",e)}async onSessionUpdate(e){await ct(this,ut,ft).call(this),Te(this,Ze).on("session_update",e)}async offSessionUpdate(e){await ct(this,ut,ft).call(this),Te(this,Ze).off("session_update",e)}async onSessionDelete(e){await ct(this,ut,ft).call(this),Te(this,Ze).on("session_delete",e)}async offSessionDelete(e){await ct(this,ut,ft).call(this),Te(this,Ze).off("session_delete",e)}async onSessionExpire(e){await ct(this,ut,ft).call(this),Te(this,Ze).on("session_expire",e)}async offSessionExpire(e){await ct(this,ut,ft).call(this),Te(this,Ze).off("session_expire",e)}}hr=new WeakMap,Er=new WeakMap,Hr=new WeakMap,Ze=new WeakMap,jn=new WeakSet,Ec=function(){const{modalOptions:t,projectId:e}=Te(this,hr);return new Cu(I1(x1({},t),{projectId:e}))},ut=new WeakSet,ft=async function(){return Te(this,Ze)?!0:(!Te(this,Hr)&&typeof window<"u"&&Ii(this,Hr,ct(this,Bn,ea).call(this)),Te(this,Hr))},Bn=new WeakSet,ea=async function(){Ii(this,Ze,await m1.init({metadata:Te(this,hr).metadata,projectId:Te(this,hr).projectId,relayUrl:Te(this,hr).relayUrl}));const t=await Te(this,Ze).core.crypto.getClientId();try{localStorage.setItem("WCM_WALLETCONNECT_CLIENT_ID",t)}catch{console.info("Unable to set client id")}};export{ta as A,A1 as G,Ki as Q,B1 as W,lt as a,Pt as c,T1 as o,Ts as s,Sr as v,_u as x};
//# sourceMappingURL=bundle-194f8141.js.map
